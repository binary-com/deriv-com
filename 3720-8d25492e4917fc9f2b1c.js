/*! For license information please see 3720-8d25492e4917fc9f2b1c.js.LICENSE.txt */
(self.webpackChunkderiv_com=self.webpackChunkderiv_com||[]).push([[3720],{3720:function(e,t,n){"use strict";n.r(t),n.d(t,{debug:function(){return xr},init:function(){return Tr},parseEvent:function(){return mn},parseFile:function(){return ln},parseFilledForm:function(){return dn},parseGreeting:function(){return gn},parseMessage:function(){return fn},parseRichMessage:function(){return hn},parseSystemMessage:function(){return vn}});var r={}.hasOwnProperty;function o(e,t){return r.call(t,e)}function i(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}var a=Array.isArray;function s(e){return"object"==typeof e&&null!==e&&!a(e)}function c(e,t){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r]),n}),{})}function u(e){return e}function l(){return Math.random().toString(36).substring(2)}function d(e){var t=l();return o(t,e)?d(e):t}function f(e,t){for(var n="string"==typeof e?e.split("."):e,r=0,o=t;o&&r<n.length;)o=o[n[r++]];return o}function p(e){return 0===(a(e)?e:Object.keys(e)).length}function h(){}function v(e,t){var n,r="function"==typeof e?e:function(t){return f(e,t)};return(a(t)?[].concat(t):(n=t,Object.keys(n).map((function(e){return n[e]})))).sort((function(e,t){return r(e)-r(t)}))}function m(e,t){return e.reduce((function(e,n){return o(n,t)&&(e[n]=t[n]),e}),{})}var g=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};var y=function(e,t){return e===t?0:e<t?-1:1};function _(e,t){var n=[];return t.filter((function(t){var r=e(t);return-1===n.indexOf(r)&&(n.push(r),!0)}))}var b=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},w=n(78389),I=function(){return Math.random().toString(36).substring(7).split("").join(".")},x={INIT:"@@redux/INIT"+I(),REPLACE:"@@redux/REPLACE"+I(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+I()}};function T(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function E(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(E)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var n=s.indexOf(e);s.splice(n,1),a=null}}}function f(e){if(!T(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,i=o(i,e)}finally{c=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,f({type:x.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[w.Z]=function(){return this},e}return f({type:x.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[w.Z]=h,r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var C="__test_storage_support__",N=function(){var e=Object.defineProperties({},{getItem:{value:function(t){return e[t]||null}},setItem:{value:function(t,n){try{e[t]=String(n)}catch(e){}}},removeItem:{value:function(t){delete e[t]}},clear:{value:function(){Object.keys(e).forEach(e.removeItem)}},key:{value:function(t){return Object.keys(e)[t]||null}},length:{get:function(){return Object.keys(e).length}}});return e}(),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";try{var t=window[e+"Storage"];return t.setItem(C,!0),t.getItem(C),t.removeItem(C),!0}catch(e){return!1}}()?window.localStorage:N,A={setItem:function(e,t){return new Promise((function(n){return n(P.setItem(e,t))}))},getItem:function(e){return new Promise((function(t){return t(P.getItem(e))}))},removeItem:function(e){return new Promise((function(t){return t(P.removeItem(e))}))}},q=function(e){return new Promise((function(t){t(e())}))},L=n(46636),R=n.n(L),M=n(95628),D=n.n(M),U=function(e){return g(e).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")};var F=/[^:]+:\/\/[^(/|?)\s]+/,J=function(e){return e.replace(/\w/g,"$&[\\r\\n\\t]*")},H=(new RegExp("^[\0-]*("+J("javascript")+"|"+J("data")+"):","i"),n(68562)),W=n.n(H);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G=n(29652).Z,z=function(){var e=Object.create(null),t=G(e);return B({},t,{off:function(n,r){n?t.off(n,r):Object.keys(e).forEach((function(t){delete e[t]}))},once:function(e,n){t.on(e,(function r(o,i){t.off(e,r),n(o,i)}))}})},Y=function(e,t){var n,r=void 0===t?{}:t,o=r.query,i=r.transports,a=void 0===i?["websocket","xhr-polling"]:i,s=e+(o?"?"+U(o):""),c=z(),u=function(e){var t=e.min,n=void 0===t?1e3:t,r=e.max,o=void 0===r?5e3:r,i=e.jitter,a=void 0===i?.5:i,s=0;return{duration:function(){var e=n*Math.pow(2,s++);if(a){var t=Math.random(),r=Math.floor(t*a*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,o)},reset:function(){s=0}}}({min:1e3,max:5e3,jitter:.5}),l=3,d=null,f=function(){l=1,u.reset(),c.emit("connect")},p=function(){l=3,d=null,c.emit("disconnect"),y()},h=function(e){var t=e.data;c.emit("message",t)},v=function(){c.emit("heartbeat")},m=function(){var e;(l=3,d)&&((e=d).removeEventListener("open",f),e.removeEventListener("close",p),e.removeEventListener("message",h),e.removeEventListener("heartbeat",v),d.close(),d=null)},g=function(){var e;l=0,d=new(W())(s,void 0,{transports:a}),(e=d).addEventListener("open",f),e.addEventListener("close",p),e.addEventListener("message",h),e.addEventListener("heartbeat",v)},y=function(e){void 0===e&&(e=u.duration()),clearTimeout(n),0!==e?n=setTimeout(g,e):g()},_={connect:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){if(3!==l)throw new Error("Socket is already open or connecting.");clearTimeout(n),g()})),destroy:function(){_.off(),_.disconnect()},disconnect:function(){l=3,clearTimeout(n),m()},reconnect:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){m(),y(e)})),emit:function(e){if(1!==l)throw new Error("Socket is not connected.");d.send(e)},getReadyState:function(){return l},on:c.on,off:c.off};return _};function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var X=function(e,t){var n,r,o,i,a,s=void 0===t?{}:t,c=s.query,u=void 0===c?{}:c,d=s.rescheduleTimeout,f=void 0===d?3e4:d,p=s.transports,v=s.emitter,m=void 0===v?z():v,g=Y(e,{query:Z({bh:l()},u),transports:p}),y=(o=h,{cancel:function(){clearTimeout(r),o=h},check:function(){var e=b();return o=e.resolve,r=setTimeout((function(){var t=new Error("Timeout.");t.code="TIMEOUT",e.reject(t)}),2e3),e.promise},resolve:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(r),o()}))}),_=function(){return 1===g.getReadyState()},w=function(e){g.emit(JSON.stringify(e)),x()},I=function(){w({action:"ping"})},x=function(){clearTimeout(n),n=setTimeout(I,f)},T=function(){y.cancel(),clearTimeout(n)};return i=g,a=m,["connect","disconnect"].forEach((function(e){i.on(e,(function(t){a.emit(e,t)}))})),g.on("connect",x),g.on("disconnect",T),g.on("heartbeat",I),g.on("message",(function(e){y.resolve();var t=JSON.parse(e);"ping"!==t.action&&m.emit("message",t)})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){_()&&(y.check().then((function(){y.cancel(),m.emit("connection_recovered")}),(function(e){if(y.cancel(),"TIMEOUT"!==e.code)throw e;g.reconnect()})),I())})),window.addEventListener("offline",(function(){y.cancel(),_()&&m.emit("connection_unstable")}))),Z({},g,{destroy:function(){T(),g.destroy()},disconnect:function(){T(),g.disconnect()},reconnect:function(e){T(),g.reconnect(e)},emit:w,on:m.on,off:m.off})},$="UPLOAD_FAILED",Q=function(e,t,n){var r=void 0===n?{}:n,o=r.headers,i=r.method,a=void 0===i?"POST":i,s=r.onProgress,c=r.withCredentials,u=void 0!==c&&c,l=new XMLHttpRequest;return{promise:new Promise((function(n,r){var i,c;"function"==typeof s&&(l.upload.onprogress=function(e){s(e.loaded/e.total)}),l.onload=function(){var e;try{e=JSON.parse(l.response)}catch(t){e=l.response}if(l.status>=200&&l.status<300)n(e);else{var t=new Error("Upload failed.");t.code=$,t.response=e,r(t)}},l.onerror=function(){var e=new Error("Upload failed.");e.code=$,r(e)},l.onabort=function(){var e=new Error("Upload canceled.");e.code="UPLOAD_CANCELED",r(e)},l.open(a,e),l.withCredentials=u,o&&Object.keys(o).forEach((function(e){return l.setRequestHeader(e,o[e])})),l.send((i=t,c=new FormData,Object.keys(i).forEach((function(e){return c.append(e,i[e])})),c))})),cancel:function(){l.abort()}}};document.documentElement.currentStyle;var K="https://accounts.livechatinc.com",V="@livechat/customer-auth",ee="https://accounts.livechatinc.com",te=function(e,t,n){var r,o,i,a;return""+("production"===n?ee:ee.replace("accounts.","accounts."+n+"."))+(o=(r=e).uniqueGroups,i=r.licenseId,a=r.groupId,(o?"/licence/g"+i+"_"+a:"")+"/customer")+"?"+U(function(e,t){var n=e.clientId,r=e.licenseId;return{license_id:String(r),flow:"button",response_type:"token",client_id:n,redirect_uri:t,post_message_uri:t,state:V}}(e,t))},ne=function(e){var t=e.code,n=e.message,r=new Error(n);return r.code=t,r},re=function(e,t){var n,r,o=document.createElement("iframe");return o.style.display="none",o.setAttribute("src",te(e,(n=String(window.location),((r=n.match(F))&&r[0])+window.location.pathname),t)),o},oe=function(e,t){var n=e.licenseId,r=function(e){return"production"===e?K:K.replace("accounts.","accounts."+e+".")}(t);return new Promise((function(o,i){var a=re(e,t),s=function(){var e,t;(t=(e=a).parentNode)&&t.removeChild(e),window.removeEventListener("message",u,!1)},c=setTimeout((function(){s(),i(ne({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))}),15e3),u=function(e){var t=e.origin,a=e.data;if(t===r&&function(e){return e&&e.state===V}(a)){clearTimeout(c),s();try{o(function(e,t){if("identity_exception"in e)throw ne({code:"SSO_IDENTITY_EXCEPTION",message:e.identity_exception});if("oauth_exception"in e)throw ne({code:"SSO_OAUTH_EXCEPTION",message:e.oauth_exception});return{accessToken:e.access_token,entityId:e.entity_id,expiresIn:1e3*e.expires_in,tokenType:e.token_type,creationDate:Date.now(),licenseId:t}}(a,n))}catch(e){i(e)}}};window.addEventListener("message",u,!1),new Promise((function(e){!function t(){document.body?e(document.body):setTimeout(t,100)}()})).then((function(e){e.appendChild(a)}))}))},ie=function(e){var t=e.licenseId,n=e.clientId;if("number"!=typeof t||"string"!=typeof n)throw new Error("You need to pass valid configuration object: { licenseId, clientId }.")},ae=function(e,t){ie(e);var n="@@lc_auth_token:"+e.licenseId+(e.uniqueGroups?":"+e.groupId:""),r=null,o=null,i=A.getItem(n).then((function(e){null!==i&&(i=null,e&&(o=JSON.parse(e)))})),a=function(){return r=oe(e,t).then((function(e){return r=null,A.setItem(n,JSON.stringify(e)),o=e,e}),(function(e){throw r=null,e}))};return{getFreshToken:a,getToken:function e(){return r||(o&&!function(e){var t=e.creationDate,n=e.expiresIn;return Date.now()>=t+n}(o)?Promise.resolve(o):i?i.then(e):a())},hasToken:function e(){return i?i.then(e):Promise.resolve(!!o)},invalidate:function(){return o=null,i=null,A.removeItem(n)}}};function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function ue(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var le="change_region",de="check_goals",fe="destroy",pe="fail_all_requests",he="login_success",ve="pause_connection",me="prefetch_token",ge="push_received",ye="push_response_received",_e="reconnect",be="request_failed",we="response_received",Ie="send_request",xe="set_chat_active",Te="set_self_id",Ee="socket_connected",Se="socket_disconnected",Oe="socket_recovered",je="socket_unstable",ke="start_connection",Ce="update_customer_page",Ne="CONNECTION_LOST",Pe="IDENTITY_MISMATCH",Ae="MISDIRECTED_CONNECTION",qe="MISSING_CHAT_THREAD",Le="accept_greeting",Re="activate_chat",Me="cancel_greeting",De="deactivate_chat",Ue="delete_chat_properties",Fe="delete_event_properties",Je="delete_thread_properties",He="get_chat",We="get_customer",Be="get_form",Ge="get_predicted_agent",ze="get_url_info",Ye="list_chats",Ze="list_group_statuses",Xe="list_threads",$e="login",Qe="mark_events_as_seen",Ke="send_event",Ve="send_rich_message_postback",et="send_sneak_peek",tt="set_customer_session_fields",nt="start_chat",rt="update_chat_properties",ot="update_customer",it="update_customer_page",at="update_event_properties",st="update_thread_properties",ct="connected",ut="destroyed",lt="disconnected",dt="agent",ft="customer",pt=function(e){return e.connection.status},ht=function(e,t){return e.requests[t]},vt=function(e){return e.users.self.id},mt=function(e,t){var n=e.chats[t];return!!n&&n.active},gt=function(e){return pt(e)===ct},yt=function(e){var t=e.region;return"https://api"+(t?"-"+t:"")+function(e){var t=e.licenseId,n=e.env;return 1520===t?".staging":"production"===n?"":"."+n}(e)+".livechatinc.com"},_t=function(e){return yt(e)+"/v3.2/customer"},bt=function(e,t){var n=t.id;return se({},e,{requests:ce(e.requests,[n].map(ue))})},wt=function(e,t){return se({},t,{connection:se({},t.connection,{status:e})})},It=function(e){var t,n,r;return n=e,(t={}).change_region=function(e,t){return se({},e,{region:t.region})},t.destroy=function(e){return wt(ut,e)},t.login_success=function(e){return wt(ct,e)},t.pause_connection=function(e){return wt("paused",e)},t.request_failed=bt,t.response_received=bt,t.send_request=function(e,t){var n,r=t.promise,o=t.resolve,i=t.reject,a=t.id,s=t.request;return se({},e,{requests:se({},e.requests,(n={},n[a]={id:a,promise:r,resolve:o,reject:i,request:s},n))})},t.set_chat_active=function(e,t){var n,r=t.id,o=t.active;return se({},e,{chats:se({},e.chats,(n={},n[r]=se({},e.chats[r],{active:o}),n))})},t.set_self_id=function(e,t){return se({},e,{users:se({},e.users,{self:se({},e.users.self,{id:t.id})})})},t.socket_disconnected=function(e){var t=pt(e);return se({},wt(t===lt?lt:"reconnecting",e),{requests:{}})},t.update_customer_page=function(e,t){return se({},e,{page:se({},e.page,t)})},(r=t)[void 0]&&console.warn(["Reducer contains an 'undefined' action type.","Have you misspelled a constant?"].join("\n")),function(e,t){return void 0===e&&(e=n),o(t.type,r)?r[t.type](e,t.payload):e}};function xt(e){var t=u,n=function(){var e=[],t=function(t){return function(n){return function(r){var o=n(r);return e.forEach((function(e){e(r,t)})),o}}};return t.add=function(t){e.push(t)},t}(),r=E(It(function(e){var t=e.application,n=void 0===t?{}:t,r=e.licenseId,o=e.groupId,i=void 0===o?null:o,a=e.env,s=e.page,c=void 0===s?null:s,u=e.region,l=void 0===u?null:u,d=e.referrer,f=void 0===d?null:d,p=e.uniqueGroups,h=void 0!==p&&p,v=e.mobile,m=void 0!==v&&v;return{application:se({},n,{name:"customer_sdk",version:"2.0.4"}),licenseId:r,env:a,groupId:i,chats:{},connection:{status:lt},page:c,region:l,referrer:f,requests:{},users:{self:{id:null,type:ft},others:{}},uniqueGroups:h,mobile:m}}(e)),t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return j({},n,{dispatch:r=k.apply(void 0,i)(n.dispatch)})}}}(n)));return r.addSideEffectsHandler=n.add,r}function Tt(e){var t=e.message,n=e.code,r=new Error(t);return r.code=n,r}var Et="chat_deactivated",St="customer_disconnected",Ot="customer_side_storage_updated",jt="incoming_chat",kt="incoming_event",Ct="incoming_multicast",Nt="incoming_typing_indicator",Pt="queue_position_updated",At="thread_properties_updated",qt="user_added_to_chat",Lt="user_removed_from_chat",Rt="file",Mt="filled_form",Dt="message",Ut="rich_message",Ft="system_message",Jt=function(e){var t={};return"string"==typeof e.customId&&(t.custom_id=e.customId),s(e.properties)&&(t.properties=e.properties),t},Ht=function(e){switch(e.type){case Dt:var t=se({},Jt(e),{type:e.type,text:e.text});return e.postback&&(t.postback={id:e.postback.id,thread_id:e.postback.threadId,event_id:e.postback.eventId,type:e.postback.type,value:e.postback.value}),t;case Rt:return se({},Jt(e),{type:e.type,url:e.url});case Mt:return se({},Jt(e),{type:e.type,form_id:e.formId,fields:e.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.groupId;return se({},e,{answer:se({},ce(t,["groupId"]),{group_id:n})});default:return e}}))});case Ft:var n=se({},Jt(e),{type:e.type,text:e.text,system_message_type:e.systemMessageType});return e.recipients&&(n.recipients=e.recipients),n}},Wt=function(e){var t=e.chat,n=e.continuous,r={chat:{}};if("boolean"==typeof n&&(r.continuous=n),!t)return r;var o=t.access,i=t.thread,a=t.properties;return o&&o.groupIds&&(r.chat.access={group_ids:o.groupIds}),a&&(r.chat.properties=a),i&&(r.chat.thread=function(e){var t={},n=e.events,r=e.properties;return n&&(t.events=n.map(Ht)),r&&(t.properties=r),t}(i)),r},Bt=function(e){return g(e).map((function(e){var t,n=e[0],r=e[1];return(t={})[n]=r,t}))},Gt=function(e){var t=m(["avatar","name","email"],e);return e.sessionFields&&(t.session_fields=Bt(e.sessionFields)),t},zt=function(e){return{type:fe,payload:{reason:e}}},Yt=function(e){return void 0===e&&(e=!1),{type:me,payload:{fresh:e}}},Zt=function(e){return{type:_e,payload:{delay:e}}},Xt=function(e,t,n){return{type:Ie,payload:se({request:{action:e,payload:t}},n&&{source:n})}},$t=function(e,t){return{type:xe,payload:{id:e,active:t}}},Qt=function(e){return{type:Te,payload:{id:e}}},Kt=function(e,t){t.payload.id=d(e.getState().requests);var n=b(),r=n.resolve,o=n.reject,i=n.promise;return t.payload.promise=i,t.payload.resolve=r,t.payload.reject=o,e.dispatch(t),i},Vt=function(e){var t=e.getState(),n=t.licenseId,r=t.groupId;return"side_storage_"+n+(t.uniqueGroups?":"+r:"")},en=function(e){return A.getItem(Vt(e)).catch(h).then((function(e){return JSON.parse(e||"{}")})).catch((function(){return{}}))},tn=function(e,t,n){return Kt(e,Xt(t,n,"login"))};function nn(e,t){var n,r,o=null,i=new(R())({min:300,max:6e4,jitter:.3}),a=function(e){return n.dispatch(zt(e))},s=function(){return n.dispatch(Zt(i.duration()))},c=function(){return Promise.all([e.getToken(),en(n)])},u=function(e){var t=e[0],r=e[1],o=vt(n.getState());if(null===o)n.dispatch(Qt(t.entityId));else if(o!==t.entityId){var i=new Error("Identity has changed.");throw i.code=Pe,i}return[t,r]},l=function(e){var r,i,a,s=e[0],c=e[1],u=n.getState(),l=u.application,d=u.groupId,f=u.page,p=u.referrer,h=u.mobile,v={token:s.tokenType+" "+s.accessToken,customer:"function"==typeof t?Gt(t()):{},customer_side_storage:c,is_mobile:h,application:(r=["name","version"],i=l,r.reduce((function(e,t){return e[t]=i[t],e}),{}))};return"number"==typeof d&&(v.group_id=d),l.channelType&&(v.application.channel_type=l.channelType),null!==f&&(o=f,v.customer_page=f),null!==p&&(v.referrer=p),Promise.race([tn(n,$e,v),(a=15e3,new Promise((function(e){setTimeout(e,a)}))).then((function(){return Promise.reject(Tt({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))}))])};return function(t){n=t,r&&r.cancel(),r=function(e,t,n){var r=e.slice(0),o=!1;return function e(i){var a=r.shift();q((function(){return a(i)})).then((function(n){o||(r.length?e(n):t(n))}),(function(e){o||n(e)}))}(),{cancel:function(){o=!0}}}([c,u,l],(function(e){var t;r=null,i.reset(),t=n.getState().page,o!==t&&tn(n,it,t).catch(h),o=null,n.dispatch({type:he,payload:e})}),(function(t){switch(t.code){case"AUTHENTICATION":return e.getFreshToken(),void s();case Ne:case Ae:return;case"SSO_IDENTITY_EXCEPTION":case"SSO_OAUTH_EXCEPTION":return"server_error"===t.message||"temporarily_unavailable"===t.message?void s():void a(t.message);case Pe:case"CUSTOMER_BANNED":case"USERS_LIMIT_REACHED":case"WRONG_PRODUCT_VERSION":return void a(t.code.toLowerCase());default:return void s()}}))}}var rn,on=function(e,t){var n=e.getState,r=e.dispatch,o=function(e){return e.requests}(n());r({type:pe,payload:{rejects:Object.keys(o).map((function(e){return o[e].reject})),reason:t}})},an=function(e,t,n){var r=e.getState,o=e.dispatch,i=t.payload.id;o({type:be,payload:{id:i,reject:r().requests[i].reject,error:n}})},sn=Object.freeze({success:!0}),cn=function(e,t){var n={id:t.id,authorId:t.author_id,createdAt:t.created_at,threadId:e,properties:t.properties||{}};return void 0!==t.custom_id&&(n.customId=t.custom_id),n},un=function(e,t){var n,r,o,i,a;t.height>t.width?(r="height",o="width",i=t.height,a=t.width):(r="width",o="height",i=t.width,a=t.height);var s=e/i;return(n={})[r]=Math.ceil(Math.min(i,e)),n[o]=Math.ceil(Math.min(s*a,a)),n},ln=function(e,t){return void 0!==t.width&&void 0!==t.height?function(e,t){return se({},cn(e,t),{type:Rt,contentType:t.content_type,url:t.url,name:t.name,width:t.width,height:t.height,thumbnails:{default:se({url:t.thumbnail_url},un(300,t)),high:se({url:t.thumbnail2x_url},un(600,t))}})}(e,t):se({},cn(e,t),{type:Rt,contentType:t.content_type,url:t.url,name:t.name})},dn=function(e,t){return se({},cn(e,t),{type:Mt,formId:t.form_id,fields:t.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.group_id;return se({},e,{answer:se({},ce(t,["group_id"]),{groupId:n})});default:return e}}))})},fn=function(e,t){return se({},cn(e,t),{type:Dt,text:t.text})},pn=function(e){var t={};if("string"==typeof e.title&&(t.title=e.title),"string"==typeof e.subtitle&&(t.subtitle=e.subtitle),e.image){var n=e.image;t.image={url:n.url,name:n.name}}return e.buttons&&(t.buttons=e.buttons.map((function(e){switch(e.type){case"message":case"phone":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};case"url":var t={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return e.target&&(t.target=e.target),t;case"webview":var n={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return"string"==typeof e.webview_height&&(n.webviewHeight=e.webview_height),n;default:return{text:e.text,postbackId:e.postback_id,userIds:e.user_ids,role:e.role||"default"}}}))),t},hn=function(e,t){switch(t.template_id){case"cards":case"quick_replies":case"sticker":return se({},cn(e,t),{type:Ut,template:t.template_id,elements:t.elements.map(pn)});default:return null}},vn=function(e,t){var n=se({},cn(e,se({},t,{author_id:"system"})),{type:Ft,text:t.text,systemMessageType:t.system_message_type});return t.text_vars&&(n.textVars=t.text_vars),n},mn=function(e,t){switch(t.type){case Rt:return ln(e,t);case Mt:return dn(e,t);case Dt:return fn(e,t);case Ut:return hn(e,t);case Ft:return vn(e,t);default:return null}},gn=function(e){return{id:e.id,addon:e.addon||null,uniqueId:e.unique_id,displayedFirstTime:e.displayed_first_time,accepted:e.accepted||!1,event:mn(null,e.event),agent:{id:e.agent.id,name:e.agent.name,avatar:e.agent.avatar,jobTitle:e.agent.job_title,isBot:e.agent.is_bot||!1}}},yn=function(e){return void 0===e&&(e={}),e.group_ids?{groupIds:e.group_ids}:{}},_n=function(e){return c((function(e){return e.events_seen_up_to?e.events_seen_up_to:null}),(t="id",e.reduce((function(e,n){return e[n[t]]=n,e}),{})));var t},bn=function(e,t){var n=t.properties||{};return{id:t.id,chatId:e,active:t.active,access:yn(t.access),createdAt:t.created_at,userIds:t.user_ids,events:t.events.map((function(e){return mn(t.id,e)})).filter(Boolean),properties:n,previousThreadId:t.previous_thread_id||null,nextThreadId:t.next_thread_id||null,queue:t.queue?Sn(t.queue):null}},wn=function(e){return{id:e.id,access:yn(e.access),users:e.users.map(On),properties:e.properties||{},thread:bn(e.id,e.thread),eventsSeenUpToMap:_n(e.users)}},In=function(e){var t=m(["avatar","email","name"],e);return e.session_fields&&(t.sessionFields=e.session_fields.reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=t[n],e}),{})),t},xn=function(e){var t=In(e);return se({id:e.id,type:ft},t,{sessionFields:t.sessionFields||{}})},Tn=function(e){var t=e.statistics;return se({},xn(e),{statistics:{chatsCount:t.chats_count,threadsCount:t.threads_count,visitsCount:t.visits_count,pageViewsCount:t.page_views_count,greetingsShownCount:t.greetings_shown_count,greetingsAcceptedCount:t.greetings_accepted_count}})},En=function(e){return{position:e.position,waitTime:e.wait_time}},Sn=function(e){return se({},En(e),{queuedAt:e.queued_at})},On=function(e){return e.type===ft?se({},xn(n=e),{present:n.present}):{id:(t=e).id,type:dt,name:t.name,avatar:t.avatar,jobTitle:t.job_title,present:t.present};var t,n},jn=((rn={}).CONNECTION_LOST="Connection lost.",rn.MISDIRECTED_CONNECTION="Connected to wrong region.",rn),kn=function(e,t){var n=e.getState();switch(t.type){case ye:case ge:switch(t.payload.action){case Et:return void e.dispatch($t(t.payload.payload.chatId,!1));case jt:return void e.dispatch($t(t.payload.payload.chat.id,!0));default:return}case we:switch(t.payload.action){case Ye:return void t.payload.payload.chatsSummary.filter((function(e){var t=e.id,r=e.active;return mt(n,t)!==r})).forEach((function(t){var n=t.id,r=t.active;e.dispatch($t(n,r))}));default:return}}},Cn=function(e,t){t.forEach((function(t){if("present"in t){var n=ce(t,["present"]);e("user_data",n)}else if(t.type!==ft)e("user_data",t);else{var r=ce(t,["statistics"]);e("user_data",r)}}))},Nn=function(e,t){var n=e.emit,r=e.store,o=t.payload;switch(o.action){case At:return o.payload.properties.lc2&&"queue_pos"in o.payload.properties.lc2&&n(Pt,{chatId:o.payload.chatId,threadId:o.payload.threadId,queue:{position:o.payload.properties.lc2.queue_pos,waitTime:o.payload.properties.lc2.queue_waiting_time}}),void n("thread_properties_updated",o.payload);case Ot:return void function(e,t){A.setItem(Vt(e),JSON.stringify(t)).catch(h)}(r,o.payload.customer_side_storage);case St:switch(o.payload.reason){case"access_token_expired":r.dispatch(Yt(!0)),r.dispatch(Zt(100)),n("disconnected",o.payload);break;case"customer_banned":case"customer_temporarily_blocked":case"license_not_found":case"product_version_changed":case"too_many_connections":case"unsupported_version":r.dispatch(zt(o.payload.reason));break;case"misdirected_connection":on(r,Ae),r.dispatch({type:le,payload:o.payload.data});break;case"too_many_unauthorized_connections":on(r,"TOO_MANY_UNAUTHORIZED_CONNECTIONS");break;default:r.dispatch(Zt(100)),n("disconnected",o.payload)}return;case jt:return Cn(n,o.payload.chat.users),void n(o.action,o.payload);case kt:if(null===o.payload.event)return;return void n(o.action,o.payload);case Nt:return void n(o.action,o.payload);case Ct:return function(e,t){var n=t.type,r=t.content;if("lc2"===n&&"groups_update"===r.name&&"groups"in r&&!p(r.groups)){e("availability_updated",{availability:"offline"===r.groups[0].status?"offline":"online"})}}(n,o.payload),void n(o.action,o.payload);case qt:return Cn(n,[o.payload.user]),void n(o.action,o.payload);default:return void n(o.action,o.payload)}},Pn=function(e,t){var n=e.emit,r=t.payload;switch(r.action){case Et:return void r.resolve(sn);case He:return Cn(n,r.payload.users),void r.resolve(r.payload);case jt:return Cn(n,r.payload.chat.users),void r.resolve(r.payload);case kt:return void r.resolve(r.payload.event);case Ye:return Cn(n,r.payload.users),void r.resolve(r.payload);default:return void r.resolve(r.payload)}},An=function(e){var t=e.auth,n=e.customerDataProvider,r=e.emitter,o=e.socket,i=r.emit,a=nn(t,n);return function(e,n){switch(e.type){case le:return void o.reinitialize();case de:return void function(e,t,n){return t.getToken().then((function(t){var r=e.getState();null===vt(r)&&e.dispatch(Qt(t.entityId));var o=r.page;if(o&&o.url){var i=U({license_id:r.licenseId}),a={customer_fields:n||{},session_fields:Bt(n||{}),group_id:r.groupId||0,page_url:o.url};return D()(_t(r)+"/action/check_goals?"+i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.tokenType+" "+t.accessToken},body:JSON.stringify(a)}).then((function(){}))}}))}(n,t,e.payload.sessionFields).catch(h);case fe:var s=e.payload;return o.destroy(),"manual"!==s.reason&&i("disconnected",s),void r.off();case pe:var c=e.payload,u=c.reason,l=c.rejects,d={message:jn[u],code:u};return void l.forEach((function(e){e(Tt(d))}));case he:var f=e.payload,p=f.dynamicConfig,v=f.customer,m=f.chats,g=f.greeting,y=se({customer:v,availability:f.availability},g&&{greeting:g});return Object.defineProperty(y,"__unsafeDynamicConfig",{value:p}),Object.defineProperty(y,"__unsafeChats",{value:m}),void i("connected",y);case ve:return void o.disconnect();case me:return e.payload.fresh?void t.getFreshToken().catch(h):void t.hasToken().then((function(e){return e?t.getToken().then((function(e){if(!(e.creationDate+e.expiresIn-Date.now()>36e5))return t.invalidate().then(t.getFreshToken)})):t.getToken()})).catch(h);case ge:return e.payload.action===St||kn(n,e),void Nn({emit:i,store:n},e);case ye:return kn(n,e),void Pn({emit:i},e);case _e:return void o.reconnect(e.payload.delay);case be:var _=e.payload;return void(0,_.reject)(Tt(_.error));case we:return kn(n,e),void Pn({emit:i},e);case Ie:var b=n.getState();return function(e){return pt(e)===ut}(b)?void an(n,e,{code:"SDK_DESTROYED",message:"SDK destroyed."}):gt(b)||"login"===e.payload.source?void function(e,t){var n=t.payload,r=se({request_id:n.id},n.request);e.emit(r)}(o,e):void an(n,e,{code:"NO_CONNECTION",message:"No connection."});case Te:return void i("customer_id",e.payload.id);case Se:return void i("disconnected",{reason:"connection_lost"});case Ee:return void a(n);case Oe:if(!gt(n.getState()))return;return void i("connection_recovered");case je:if(!gt(n.getState()))return;return void i("connection_unstable");case ke:return o.connect(),void n.dispatch(Yt());case Ce:if(!gt(n.getState()))return;return void Kt(n,Xt(it,e.payload)).catch(h);default:return}}},qn=function(e,t){var n=e.getState(),r=_t(n)+"/rtm/sjs";return X(r,{query:{license_id:n.licenseId},emitter:t})},Ln=function(e){return{chatId:e.chat_id,properties:e.properties}},Rn=function(e){var t={chatId:e.chat_id,threadId:e.thread_id,transferredTo:se({},e.transferred_to.agent_ids&&{agentIds:e.transferred_to.agent_ids},e.transferred_to.group_ids&&{groupIds:e.transferred_to.group_ids}),queue:e.queue?Sn(e.queue):null};return"manual"===e.reason?se({},t,{reason:e.reason,requesterId:e.requester_id}):se({},t,{reason:e.reason})},Mn=function(e){return{url:e.url,title:e.title,timestamp:1e3*e.timestamp}},Dn=function(e){return{customer:se({id:e.customer.id},In(e.customer))}},Un=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},Fn=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},Jn=function(e){var t=e.thread_id;return{chatId:e.chat_id,threadId:t,event:mn(t,e.event)}},Hn=function(e){return{chatId:e.chat_id,userId:e.user_id,seenUpTo:e.seen_up_to}},Wn=function(e){return{uniqueId:e.unique_id}},Bn=function(e){return{chat:wn(e.chat)}},Gn=function(e){return{chatId:e.chat_id,event:mn(e.thread_id,e.event)}},zn=function(e){return gn(e)},Yn=function(e){return{userId:e.user_id,chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,postback:e.postback}},Zn=function(e){var t=e.chat_id,n=e.typing_indicator;return{chatId:t,typingIndicator:{authorId:n.author_id,isTyping:n.is_typing}}},Xn=function(e){return{chatId:e.chat_id,threadId:e.thread_id,queue:En(e.queue)}},$n=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},Qn=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},Kn=function(e){return{chatId:e.chat_id,user:On(e.user),present:e.user.present}},Vn=function(e){return{chatId:e.chat_id,userId:e.user_id}},er=function(e){return e.map((function(e){switch(e.type){case"group_chooser":return se({},e,{options:e.options.map((function(e){var t=e.group_id;return se({},ce(e,["group_id"]),{groupId:t})}))});case"rating":var t=e.comment_label;return se({},ce(e,["comment_label"]),{commentLabel:t});default:return e}}))},tr=function(e){return e.enabled?se({},e,{form:"id"in e.form.fields[0]?{id:e.form.id,fields:er(e.form.fields)}:{id:"ticket",fields:(t=e.form.fields,n=t.map((function(e,t){return se({},e,{id:String(t)})})),er(n))}}):e;var t,n},nr=function(e){var t={url:e.url};return e.title&&(t.title=e.title),e.description&&(t.description=e.description),e.image_url&&(t.imageUrl="https://"+e.image_url,e.image_width&&e.image_height&&(t.imageWidth=e.image_width,t.imageHeight=e.image_height)),t},rr=function(e){var t=e.online_groups_ids,n=e.customer_groups;if(!t)return"offline";var r,o=n.monitoring.id;return r=o,-1!==t.indexOf(r)?"online":"offline"},or=function(e){var t=e.chats_summary.map((function(e){var t=e.id,n=e.active,r=e.access,o=e.last_thread_created_at,i=e.last_thread_id,a=e.last_event_per_type,s=e.properties,u=void 0===s?{}:s,l=e.users,d={id:t,active:n,access:yn(r),properties:u,users:l.map(On),lastThreadId:i||null,lastThreadCreatedAt:o||null,eventsSeenUpToMap:_n(l)};if(!a)return d;d.lastEventsPerType=c((function(e){return mn(e.thread_id,e.event)}),a);var f,p=a,h=Object.keys(p).map((function(e){return p[e]})),v=(f=h.sort((function(e,t){return e.thread_id===t.thread_id?y(e.event.created_at,t.event.created_at):y(e.thread_created_at,t.thread_created_at)}))).length>0?f[f.length-1]:null;return v&&(d.lastEvent=d.lastEventsPerType[v.event.type]),d}));return{chatsSummary:v((function(e){var t=e.lastEvent,n=e.order;return-1*(void 0!==t?t.timestamp:n)}),t),totalChats:e.total_chats,users:_((function(e){return e.id}),i((function(e){return e.users}),t)),previousPageId:e.previous_page_id||null,nextPageId:e.next_page_id||null}},ir=function(e){return e.groups_status},ar=function(e,t){return{threads:t.threads.map((function(t){return bn(e.payload.chat_id,t)})),previousPageId:t.previous_page_id||null,nextPageId:t.next_page_id||null}},sr=function(e){var t=e.__priv_dynamic_config,n=e.chats,r=e.greeting||t.greeting;return se({dynamicConfig:t,customer:Tn(e.customer),availability:rr(t),chats:n.map((function(t){return{id:t.chat_id,active:"has_active_thread"in t?t.has_active_thread:e.has_active_thread,hasUnreadEvents:t.has_unread_events}}))},r&&{greeting:gn(r)})},cr=function(e){switch(e.action){case Et:return{action:e.action,payload:{chatId:e.payload.chat_id}};case"chat_properties_deleted":return{action:e.action,payload:(t=e.payload,{chatId:t.chat_id,properties:t.properties})};case"chat_properties_updated":return{action:e.action,payload:Ln(e.payload)};case"chat_transferred":return{action:e.action,payload:Rn(e.payload)};case Ot:case St:return{action:e.action,payload:e.payload};case"customer_page_updated":return{action:e.action,payload:Mn(e.payload)};case"customer_updated":return{action:e.action,payload:Dn(e.payload)};case"event_properties_deleted":return{action:e.action,payload:Un(e.payload)};case"event_properties_updated":return{action:e.action,payload:Fn(e.payload)};case"event_updated":return{action:e.action,payload:Jn(e.payload)};case"events_marked_as_seen":return{action:e.action,payload:Hn(e.payload)};case"greeting_accepted":case"greeting_canceled":return{action:e.action,payload:Wn(e.payload)};case jt:return{action:e.action,payload:Bn(e.payload)};case kt:return{action:e.action,payload:Gn(e.payload)};case"incoming_greeting":return{action:e.action,payload:zn(e.payload)};case Ct:return{action:e.action,payload:e.payload};case"incoming_rich_message_postback":return{action:e.action,payload:Yn(e.payload)};case Nt:return{action:e.action,payload:Zn(e.payload)};case Pt:return{action:e.action,payload:Xn(e.payload)};case"thread_properties_deleted":return{action:e.action,payload:$n(e.payload)};case At:return{action:e.action,payload:Qn(e.payload)};case qt:return{action:e.action,payload:Kn(e.payload)};case Lt:return{action:e.action,payload:Vn(e.payload)};case"chat_user_added":return{action:qt,payload:Kn(e.payload)};case"chat_user_removed":return{action:Lt,payload:Vn(e.payload)}}var t},ur=function(e,t){var n=e.dispatch,r=e.getState,o=t.request_id,i=ht(r(),o),a=i.promise,s=i.resolve,c=function(e){var t,n,r=e.request,o=e.response;switch(o.action){case Le:case Me:case Ue:case Fe:case Je:return{action:o.action,payload:sn};case He:return{action:o.action,payload:(n=o.payload,wn(n))};case We:return{action:o.action,payload:Tn(o.payload)};case Be:return{action:o.action,payload:tr(o.payload)};case Ge:return{action:o.action,payload:(t=o.payload,{id:t.id,type:dt,name:t.name,avatar:t.avatar,jobTitle:t.job_title,isBot:t.is_bot})};case ze:return{action:o.action,payload:nr(o.payload)};case Ye:return{action:o.action,payload:or(o.payload)};case Ze:return{action:o.action,payload:ir(o.payload)};case Xe:return{action:o.action,payload:ar(r,o.payload)};case $e:return{action:o.action,payload:sr(o.payload)};case Qe:case et:case tt:case Ve:case rt:case ot:case it:case at:case st:return{action:o.action,payload:sn}}}({request:i.request,response:t});n({type:we,payload:se({id:o,promise:a,resolve:s},c)})},lr=function(e,t){var n=e.dispatch;return t.on("connect",(function(){n({type:Ee})})),t.on("message",(function(t){if("response"===t.type){if(!t.success)return void function(e,t){var n,r=e.dispatch,o=e.getState,i=t.request_id,a=t.payload,s=ht(o(),i).reject;r({type:be,payload:{id:i,reject:s,error:(n=a.error,{code:n.type.toUpperCase(),message:n.message})}})}(e,t);switch(t.action){case Re:case De:case Ke:case nt:return;default:return void ur(e,t)}}if("request_id"in t)switch(t.action){case Et:case jt:case kt:return void function(e,t){var n=e.dispatch,r=e.getState,o=t.request_id,i=ht(r(),o),a=i.promise,s=i.resolve,c=cr(t);n({type:ye,payload:se({id:o,promise:a,resolve:s},c)})}(e,t)}!function(e,t){var n=cr(t);n&&e.dispatch({type:ge,payload:n})}(e,t)})),t.on("disconnect",(function(){on(e,Ne),pt(e.getState())===ct&&e.dispatch({type:Se})})),t.on("connection_unstable",(function(){n({type:je})})),t.on("connection_recovered",(function(){n({type:Oe})})),t.off},dr="incorrect requester structure",fr=function(e,t){return e.length?e+"\n"+t:t},pr=function(e,t,n){var r=n.filledForm,o=n.groupId,i=n.timeZone;return t.getToken().then((function(t){var n=e.getState();null===vt(n)&&e.dispatch(Qt(t.entityId));var a=yt(n)+"/v2/tickets/new",s=function(e,t){var n=t.fields,r=t.customerId,o=t.groupId,i=void 0===o?e.groupId:o,a=t.timeZone,s=se({licence_id:e.licenseId,ticket_message:"",offline_message:"",visitor_id:r,requester:{}},"number"==typeof i&&{group:i},e.page&&{source:{url:e.page.url}},a&&{timezone:a});return n.reduce((function(e,t){switch(t.type){case"subject":var n=t.answer,r=n?t.label+" "+n:t.label;return n&&(e.subject=n),e.offline_message=fr(e.offline_message,r),e;case"name":var o=t.answer,i=o?t.label+" "+o:t.label;return o&&(e.requester.name=o),e.offline_message=fr(e.offline_message,i),e;case"email":var a=t.answer,s=a?t.label+" "+a:t.label;return e.requester.mail=a,e.offline_message=fr(e.offline_message,s),e;case"question":case"textarea":var c=t.answer,u=c?t.label+" "+c:t.label;return e.offline_message=fr(e.offline_message,u),e.ticket_message=fr(e.ticket_message,u),e;case"radio":case"select":var l=t.answer&&t.answer.label,d=l?t.label+" "+l:t.label;return e.offline_message=fr(e.offline_message,d),e.ticket_message=fr(e.ticket_message,d),e;case"checkbox":var f=t.answers&&t.answers.map((function(e){return e.label})).join(", "),p=f?t.label+" "+f:t.label;return e.offline_message=fr(e.offline_message,p),e.ticket_message=fr(e.ticket_message,p),e;default:return e}}),s)}(n,{fields:r.fields,customerId:t.entityId,groupId:o,timeZone:i});return D()(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){if(e.ok)return e.json().then((function(e){return se({},e,{text:s.ticket_message})}));if(400===e.status||422===e.status){var t=function(e){if(!e||!e.errors)throw new Error;var t=e.errors[0];if(Object.keys(t)[0]===dr)throw Tt({message:t[dr][0],code:"VALIDATION"});throw new Error};return e.json().then(t,t)}throw new Error}))}))},hr=1048576,vr=10485760,mr=function(e,t){if(void 0===t&&(t=2),e<1024)return e+" b";var n=e/1024;if(e<hr)return n.toFixed(t)+" kb";var r=n/1024;return e<1073741824?r.toFixed(t)+" MB":(r/1024).toFixed(t)+" GB"},gr=function(e,t){var n,r=e.auth,o=e.store,i=t.file,a=t.onProgress,s=!1;return{promise:new Promise((function(e,t){!function(e){if(e.size>vr)throw Tt({message:"The file is too big (max size is "+mr(vr)+").",code:"TOO_BIG_FILE"})}(i);var c=o.getState(),u=U({license_id:c.licenseId}),l=_t(c)+"/action/upload_file?"+u,d={file:i};r.getToken().then((function(r){s?t(new Error("Upload cancelled.")):(n=Q(l,d,{headers:{Authorization:r.tokenType+" "+r.accessToken},onProgress:a})).promise.then(e,(function(e){if(e.response){var n=e.response.error,r=n.type,o=n.message;t(Tt({message:o,code:r.toUpperCase()}))}else t(e)}))}))})),cancel:function(){s||(s=!0,n&&n.cancel())}}},yr=function(e){var t=e.env,n=e.licenseId,r=e.eventName;if("production"!==t)return Promise.resolve();var o={event_name:r,severity:"Informational",sdkVersion:"2.0.4"},i={licence_id:n,event_id:"chat_widget_customer_sdk",message:JSON.stringify(o)};return function(e,t){return new Promise((function(n){var r=new Image;r.src=e+"?"+t,r.onerror=h,r.onload=function(){return n()}}))}("https://queue.livechatinc.com/logs",U(i))},_r="LISTENER_IDENTITY",br={},wr=function(e,t){void 0===t&&(t="");var n=Object.keys(e);return n.map((function(n){var r=e[n];return function(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(e=console).info.apply(e,[t+"."+n+"() ===>"].concat(i));var s=r.apply(void 0,i);return s&&"function"==typeof s.then&&s.then((function(e){console.info(t+"."+n+"() <===",e)})).catch((function(e){console.error(t+"."+n+"() <===",e)})),s}})).reduce((function(e,t,r){return e[n[r]]=t,e}),{})},Ir=function(e,t,n){if(void 0===n.LISTENER_IDENTITY&&Object.defineProperty(n,_r,{value:{}}),n.LISTENER_IDENTITY[t]){var r=n.LISTENER_IDENTITY[t];return br[r]}var o=function(r){console.info("."+e+'("'+t+'") <===',r),n(r)},i=d(br);return n.LISTENER_IDENTITY[t]=i,br[i]=o,o},xr=function(e){var t=e;console.warn("You probably do not want to use debug(customerSDK) in your production environment.");var n=t.on,r=t.once,o=t.off,i=t.getChatHistory,a=t.auth,s=ce(t,["on","once","off","getChatHistory","auth"]),c=wr(s);return Object.freeze(se({auth:Object.freeze(wr(a,".auth"))},c,{getChatHistory:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).info.apply(e,[".getChatHistory()"].concat(n));var o=i.apply(void 0,n),a="history.next()";return{next:function(){var e;(e=console).info.apply(e,[a+" ===>"].concat(n));var t=o.next();return t.then((function(e){var t;(t=console).info.apply(t,[a+" <==="].concat(n,[e]))})).catch((function(e){var t;(t=console).error.apply(t,[a+" <==="].concat(n,[e]))})),t}}},off:function(e,t){console.info('.off("'+e+'", '+(t.name||"anonymous")+")");var n=t;if(void 0!==t.LISTENER_IDENTITY){var r=t.LISTENER_IDENTITY[e];n=br[r]}o(e,n)},on:function(e,t){n(e,Ir("on",e,t))},once:function(e,t){r(e,Ir("once",e,t))}}))},Tr=function(e,t){void 0===t&&(t="production"),ie(e);var n=e.autoConnect,r=void 0===n||n,o=e.customerDataProvider,i=ce(e,["autoConnect","customerDataProvider"]),a=xt(se({},i,{env:t})),s=z(),c=function(e){var t=z(),n=qn(e,t);return se({},Object.keys(n).reduce((function(e,t){return e[t]=function(){var e;return(e=n)[t].apply(e,arguments)},e}),{}),{reinitialize:function(){n.disconnect(),(n=qn(e,t)).connect()}})}(a),u=ae(i,t);a.addSideEffectsHandler(An({emitter:s,socket:c,auth:u,customerDataProvider:o})),lr(a,c);var l=Kt.bind(null,a),d=function(){a.dispatch({type:ke})},f=Object.freeze({acceptGreeting:function(e){var t=e.greetingId,n=e.uniqueId;return l(Xt(Le,{greeting_id:t,unique_id:n}))},activateChat:function(n){return yr({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Xt(Re,function(e){var t=Wt(e);return se({},t,{chat:se({},t.chat,{id:e.chat.id})})}(n)))},auth:u,cancelGreeting:function(e){var t=e.uniqueId;return l(Xt(Me,{unique_id:t}))},cancelRate:function(e){var t=e.chatId,n=e.properties,r=void 0===n?["score"]:n;return f.listThreads({chatId:t}).then((function(e){var n=e.threads;if(!n.length)throw Tt({message:'There is no thread in "'+t+'".',code:qe});return f.deleteThreadProperties({chatId:t,threadId:n[0].id,properties:{rating:r}})}))},connect:d,deactivateChat:function(e){var t=e.chatId;return l(Xt(De,{chat_id:t}))},deleteChatProperties:function(e){var t=e.chatId,n=e.properties;return l(Xt(Ue,{chat_id:t,properties:n}))},deleteEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.properties;return l(Xt(Fe,{chat_id:t,thread_id:n,event_id:r,properties:o}))},deleteThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Xt(Je,{chat_id:t,thread_id:n,properties:r}))},destroy:function(){a.dispatch(zt("manual"))},disconnect:function(){a.dispatch({type:ve})},getChat:function(e){var t=e.chatId,n=e.threadId;return l(Xt(He,{chat_id:t,thread_id:n}))},getChatHistory:function(e){var t=e.chatId;return function(e,t){var n={status:"idle",queuedTasks:[],nextPageId:null},r=function r(o,i){switch(n.status){case"idle":return n.status="fetching",void e.listThreads({chatId:t,minEventsCount:25,pageId:n.nextPageId||void 0}).then((function(e){var t=e.threads,i=e.nextPageId;n.nextPageId=i,n.nextPageId?(n.status="idle",o({value:{threads:[].concat(t).reverse()},done:!1})):(n.status="done",o({value:{threads:[].concat(t).reverse()},done:!0}));var a=n.queuedTasks.shift();a&&r(a.resolve,a.reject)}),(function(e){var t=n.queuedTasks;n.status="idle",n.queuedTasks=[],i(e),t.forEach((function(t){return t.reject(e)}))}));case"fetching":return void n.queuedTasks.push({resolve:o,reject:i});case"done":return void o({value:void 0,done:!0})}};return{next:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return new Promise(r)}))}}(f,t)},getCustomer:function(){return l(Xt(We,{}))},getForm:function(e){var t=e.groupId,n=e.type;return l(Xt(Be,{group_id:t,type:n}))},getPredictedAgent:function(e){void 0===e&&(e={});var t=e.groupId;return l(Xt(Ge,"number"==typeof t?{group_id:t}:{}))},getUrlInfo:function(e){var t=e.url;return l(Xt(ze,{url:t}))},listChats:function(e){var t=void 0===e?{}:e,n=t.limit,r=void 0===n?10:n,o=t.pageId;return r>25?Promise.reject(new Error("Specified limit is too high (max 25).")):l(Xt(Ye,{limit:r,page_id:o}))},listGroupStatuses:function(e){var t=(void 0===e?{}:e).groupIds;return l(Xt(Ze,t?{group_ids:t}:{all:!0}))},listThreads:function(e){var t=e.chatId,n=e.sortOrder,r=void 0===n?"desc":n,o=e.limit,i=e.pageId,a=e.minEventsCount;return l(Xt(Xe,{chat_id:t,sort_order:r,limit:o,page_id:i,min_events_count:a}))},markEventsAsSeen:function(e){var t=e.chatId,n=e.seenUpTo;return l(Xt(Qe,{chat_id:t,seen_up_to:n}))},on:s.on,once:s.once,off:s.off,rateChat:function(e){var t=e.chatId,n=e.rating;return f.listThreads({chatId:t}).then((function(e){var r=e.threads;if(!r.length)throw Tt({message:'There is no thread in "'+t+'".',code:qe});return f.updateThreadProperties({chatId:t,threadId:r[0].id,properties:{rating:n}})}))},sendEvent:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l(function(e){var t=e.chatId,n=e.event,r=e.attachToLastThread,o={chat_id:t,event:Ht(n)};return r&&(o.attach_to_last_thread=!0),Xt(Ke,o)}(e))})),sendTicketForm:function(e){return pr(a,u,e)},sendRichMessagePostback:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.postback;return l(Xt(Ve,{chat_id:t,event_id:r,thread_id:n,postback:o}))},setCustomerSessionFields:function(e){var t=e.sessionFields;return l(Xt(tt,{session_fields:Bt(t)}))},setSneakPeek:function(e){var t=e.chatId,n=e.sneakPeekText,r=a.getState();mt(r,t)&&gt(r)&&l(Xt(et,{chat_id:t,sneak_peek_text:n})).catch(h)},startChat:function(n){return void 0===n&&(n={}),yr({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Xt(nt,Wt(n)))},updateChatProperties:function(e){var t=e.chatId,n=e.properties;return l(Xt(rt,{chat_id:t,properties:n}))},updateCustomer:function(e){return l(Xt(ot,Gt(e)))},updateCustomerPage:function(e){a.dispatch({type:Ce,payload:m(["title","url"],e)})},updateEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.properties;return l(Xt(at,{chat_id:t,event_id:r,thread_id:n,properties:o}))},updateThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Xt(st,{chat_id:t,thread_id:n,properties:r}))},uploadFile:function(e){return gr({auth:u,store:a},e)}});return r?d():a.dispatch({type:de,payload:{sessionFields:"function"==typeof o?o().sessionFields:{}}}),f}},46636:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},95628:function(e,t,n){"use strict";e.exports=n.g.fetch},13247:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},35201:function(e,t,n){var r;e=n.nmd(e),function(){var o=n.amdO,i={function:!0,object:!0},a=i[typeof t]&&t&&!t.nodeType&&t,s=i[typeof window]&&window||this,c=a&&i.object&&e&&!e.nodeType&&"object"==typeof n.g&&n.g;function u(e,t){e||(e=s.Object()),t||(t=s.Object());var n=e.Number||s.Number,r=e.String||s.String,o=e.Object||s.Object,a=e.Date||s.Date,c=e.SyntaxError||s.SyntaxError,l=e.TypeError||s.TypeError,d=e.Math||s.Math,f=e.JSON||s.JSON;"object"==typeof f&&f&&(t.stringify=f.stringify,t.parse=f.parse);var p,h=o.prototype,v=h.toString,m=h.hasOwnProperty;function g(e,t){try{e()}catch(e){t&&t()}}var y=new a(-0xc782b5b800cec);function _(e){if(null!=_[e])return _[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=_("json-stringify")&&_("date-serialization")&&_("json-parse");else if("date-serialization"==e){if(o=_("json-stringify")&&y){var i=t.stringify;g((function(){o='"-271821-04-20T00:00:00.000Z"'==i(new a(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new a(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new a(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new a(-1))}))}}else{var s,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u="function"==typeof(i=t.stringify);u&&((s=function(){return 1}).toJSON=s,g((function(){u="0"===i(0)&&"0"===i(new n)&&'""'==i(new r)&&i(v)===p&&i(p)===p&&i()===p&&"1"===i(s)&&"[1]"==i([s])&&"[null]"==i([p])&&"null"==i(null)&&"[null,null,null]"==i([p,v,null])&&i({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==c&&"1"===i(null,s)&&"[\n 1,\n 2\n]"==i([1,2],null,1)}),(function(){u=!1}))),o=u}if("json-parse"==e){var l,d=t.parse;"function"==typeof d&&g((function(){0!==d("0")||d(!1)||(s=d(c),(l=5==s.a.length&&1===s.a[0])&&(g((function(){l=!d('"\t"')})),l&&g((function(){l=1!==d("01")})),l&&g((function(){l=1!==d("1.")}))))}),(function(){l=!1})),o=l}}return _[e]=!!o}if(g((function(){y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()})),_["bug-string-char-index"]=_["date-serialization"]=_.json=_["json-stringify"]=_["json-parse"]=null,!_("json")){var b="[object Function]",w="[object Number]",I="[object String]",x="[object Array]",T=_("bug-string-char-index"),E=function(e,t){var n,r,o,a=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)m.call(r,o)&&a++;return n=r=null,a?E=function(e,t){var n,r,o=v.call(e)==b;for(n in e)o&&"prototype"==n||!m.call(e,n)||(r="constructor"===n)||t(n);(r||m.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],E=function(e,t){var n,o,a=v.call(e)==b,s=!a&&"function"!=typeof e.constructor&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||m;for(n in e)a&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];)s.call(e,n)&&t(n)}),E(e,t)};if(!_("json-stringify")&&!_("date-serialization")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O=function(e,t){return("000000"+(t||0)).slice(-e)},j=function(e){var t,n,r,o,i,a,s,c,u;if(y)t=function(e){n=e.getUTCFullYear(),r=e.getUTCMonth(),o=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var l=d.floor,f=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return f[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){for(o=l(e/864e5),n=l(o/365.2425)+1970-1;p(n+1,0)<=o;n++);for(r=l((o-p(n,0))/30.42);p(n,r+1)<=o;r++);o=1+o-p(n,r),a=l((i=(e%864e5+864e5)%864e5)/36e5)%24,s=l(i/6e4)%60,c=l(i/1e3)%60,u=i%1e3}}return(j=function(e){return e>-1/0&&e<1/0?(t(e),e=(n<=0||n>=1e4?(n<0?"-":"+")+O(6,n<0?-n:n):O(4,n))+"-"+O(2,r+1)+"-"+O(2,o)+"T"+O(2,a)+":"+O(2,s)+":"+O(2,c)+"."+O(3,u)+"Z",n=r=o=a=s=c=u=null):e=null,e})(e)};if(_("json-stringify")&&!_("date-serialization")){function k(e){return j(this)}var C=t.stringify;t.stringify=function(e,t,n){var r=a.prototype.toJSON;a.prototype.toJSON=k;var o=C(e,t,n);return a.prototype.toJSON=r,o}}else{var N=function(e){var t=e.charCodeAt(0),n=S[t];return n||"\\u00"+O(2,t.toString(16))},P=/[\x00-\x1f\x22\x5c]/g,A=function(e){return P.lastIndex=0,'"'+(P.test(e)?e.replace(P,N):e)+'"'},q=function e(t,n,r,o,i,s,c){var u,d,f,h,m,y,_,b,T;if(g((function(){u=n[t]})),"object"==typeof u&&u&&(u.getUTCFullYear&&"[object Date]"==v.call(u)&&u.toJSON===a.prototype.toJSON?u=j(u):"function"==typeof u.toJSON&&(u=u.toJSON(t))),r&&(u=r.call(n,t,u)),u==p)return u===p?u:"null";switch("object"==(d=typeof u)&&(f=v.call(u)),f||d){case"boolean":case"[object Boolean]":return""+u;case"number":case w:return u>-1/0&&u<1/0?""+u:"null";case"string":case I:return A(""+u)}if("object"==typeof u){for(_=c.length;_--;)if(c[_]===u)throw l();if(c.push(u),h=[],b=s,s+=i,f==x){for(y=0,_=u.length;y<_;y++)m=e(y,u,r,o,i,s,c),h.push(m===p?"null":m);T=h.length?i?"[\n"+s+h.join(",\n"+s)+"\n"+b+"]":"["+h.join(",")+"]":"[]"}else E(o||u,(function(t){var n=e(t,u,r,o,i,s,c);n!==p&&h.push(A(t)+":"+(i?" ":"")+n)})),T=h.length?i?"{\n"+s+h.join(",\n"+s)+"\n"+b+"}":"{"+h.join(",")+"}":"{}";return c.pop(),T}};t.stringify=function(e,t,n){var r,o,a,s;if(i[typeof t]&&t)if((s=v.call(t))==b)o=t;else if(s==x){a={};for(var c,u=0,l=t.length;u<l;)c=t[u++],"[object String]"!=(s=v.call(c))&&"[object Number]"!=s||(a[c]=1)}if(n)if((s=v.call(n))==w){if((n-=n%1)>0)for(n>10&&(n=10),r="";r.length<n;)r+=" "}else s==I&&(r=n.length<=10?n:n.slice(0,10));return q("",((c={})[""]=e,c),o,a,r,"",[])}}}if(!_("json-parse")){var L,R,M=r.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw L=R=null,c()},F=function(){for(var e,t,n,r,o,i=R,a=i.length;L<a;)switch(o=i.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=T?i.charAt(L):i[L],L++,e;case 34:for(e="@",L++;L<a;)if((o=i.charCodeAt(L))<32)U();else if(92==o)switch(o=i.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[o],L++;break;case 117:for(t=++L,n=L+4;L<n;L++)(o=i.charCodeAt(L))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||U();e+=M("0x"+i.slice(t,L));break;default:U()}else{if(34==o)break;for(o=i.charCodeAt(L),t=L;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++L);e+=i.slice(t,L)}if(34==i.charCodeAt(L))return L++,e;U();default:if(t=L,45==o&&(r=!0,o=i.charCodeAt(++L)),o>=48&&o<=57){for(48==o&&((o=i.charCodeAt(L+1))>=48&&o<=57)&&U(),r=!1;L<a&&((o=i.charCodeAt(L))>=48&&o<=57);L++);if(46==i.charCodeAt(L)){for(n=++L;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==L&&U(),L=n}if(101==(o=i.charCodeAt(L))||69==o){for(43!=(o=i.charCodeAt(++L))&&45!=o||L++,n=L;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==L&&U(),L=n}return+i.slice(t,L)}r&&U();var s=i.slice(L,L+4);if("true"==s)return L+=4,!0;if("fals"==s&&101==i.charCodeAt(L+4))return L+=5,!1;if("null"==s)return L+=4,null;U()}return"$"},J=function e(t){var n,r;if("$"==t&&U(),"string"==typeof t){if("@"==(T?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=F());)r?","==t?"]"==(t=F())&&U():U():r=!0,","==t&&U(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=F());)r?","==t?"}"==(t=F())&&U():U():r=!0,","!=t&&"string"==typeof t&&"@"==(T?t.charAt(0):t[0])&&":"==F()||U(),n[t.slice(1)]=e(F());return n}U()}return t},H=function(e,t,n){var r=W(e,t,n);r===p?delete e[t]:e[t]=r},W=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(v.call(o)==x)for(r=o.length;r--;)H(v,E,o);else E(o,(function(e){H(o,e,n)}));return n.call(e,t,o)};t.parse=function(e,t){var n,r;return L=0,R=""+e,n=J(F()),"$"!=F()&&U(),L=R=null,t&&v.call(t)==b?W(((r={})[""]=n,r),"",t):n}}}return t.runInContext=u,t}if(!c||c.global!==c&&c.window!==c&&c.self!==c||(s=c),a&&!o)u(s,a);else{var l=s.JSON,d=s.JSON3,f=!1,p=u(s,s.JSON3={noConflict:function(){return f||(f=!0,s.JSON=l,s.JSON3=d,l=d=null),p}});s.JSON={parse:p.parse,stringify:p.stringify}}o&&(void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r))}.call(this)},98891:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(n.call(e,i)){if((r=e[i])||null!=r&&!isNaN(r)||(r=""),i=o(i),r=o(r),null===i||null===r)continue;a.push(i+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,o={};t=n.exec(e);){var i=r(t[1]),a=r(t[2]);null===i||null===a||i in o||(o[i]=a)}return o}},93491:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},68562:function(e,t,n){"use strict";var r=n(89550);e.exports=n(93558)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},18405:function(e,t,n){"use strict";var r=n(13247),o=n(87259);function i(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(i,o),e.exports=i},61660:function(e,t,n){"use strict";var r=n(13247),o=n(67269);function i(){o.call(this)}r(i,o),i.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},i.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function o(){n.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}))},i.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,r)}},i.prototype.on=i.prototype.addListener=o.prototype.addEventListener,i.prototype.removeListener=o.prototype.removeEventListener,e.exports.v=i},87259:function(e){"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},67269:function(e){"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)},e.exports=t},68542:function(e,t,n){"use strict";var r=n(13247),o=n(87259);function i(e){o.call(this),this.initEvent("message",!1,!1),this.data=e}r(i,o),e.exports=i},92110:function(e,t,n){"use strict";var r=n(35201),o=n(71244);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){o.postMessage("c",r.stringify([e,t]))},i.prototype._transportMessage=function(e){o.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},92052:function(e,t,n){"use strict";var r=n(80167),o=n(41406),i=n(35201),a=n(92110),s=n(37561),c=n(71244),u=n(92564);e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[s.transportName]=s,e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1);o.attachEvent("message",(function(o){if(o.source===parent&&(void 0===n&&(n=o.origin),o.origin===n)){var s;try{s=i.parse(o.data)}catch(e){return void o.data}if(s.windowId===c.currentWindowId)switch(s.type){case"s":var d;try{d=i.parse(s.data)}catch(e){s.data;break}var f=d[0],p=d[1],h=d[2],v=d[3];if(f!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+f+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(h,u.href)||!r.isOriginEqual(v,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+h+", "+v+")");t=new a(new l[p](h,v));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),c.postMessage("s")}}},90304:function(e,t,n){"use strict";var r=n(61660).v,o=n(13247),i=n(35201),a=n(88169);function s(e,t){r.call(this);var n=this,o=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,s;if(200===e){if(s=+new Date-o,t)try{r=i.parse(t)}catch(e){}a.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}o(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=s},37561:function(e,t,n){"use strict";var r=n(13247),o=n(61660).v,i=n(35201),a=n(81156),s=n(90304);function c(e){var t=this;o.call(this),this.ir=new s(e,a),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",i.stringify([e,n]))}))}r(c,o),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=c},10458:function(e,t,n){"use strict";var r=n(61660).v,o=n(13247),i=n(35201),a=n(41406),s=n(17075),c=n(37561);function u(e,t){var o=this;r.call(this);var u=function(){var n=o.ifr=new s(c.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=i.parse(e)}catch(e){return o.emit("finish"),void o.close()}var n=t[0],r=t[1];o.emit("finish",n,r)}o.close()})),n.once("close",(function(){o.emit("finish"),o.close()}))};n.g.document.body?u():a.attachEvent("load",u)}o(u,r),u.enabled=function(){return s.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=u},90374:function(e,t,n){"use strict";var r=n(61660).v,o=n(13247),i=n(80167),a=n(24211),s=n(20869),c=n(81156),u=n(98115),l=n(10458),d=n(90304);function f(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}o(f,r),f._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,c):s.enabled?new d(t,s):a.enabled&&n.sameScheme?new d(t,a):l.enabled()?new l(e,t):new d(t,u)},f.prototype.doXhr=function(e,t){var n=this,r=i.addPath(e,"/info");this.xo=f._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),f.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},f.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},f.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},f.timeout=8e3,e.exports=f},92564:function(e,t,n){"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},93558:function(e,t,n){"use strict";n(36269);var r,o=n(43299),i=n(13247),a=n(35201),s=n(36989),c=n(29719),u=n(80167),l=n(41406),d=n(35792),f=n(88169),p=n(78047),h=n(51998),v=n(87259),m=n(67269),g=n(92564),y=n(18405),_=n(68542),b=n(90374);function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var i=new o(e);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==i.protocol&&"https:"!==i.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var a="https:"===i.protocol;if("https:"===g.protocol&&!a&&!u.isLoopbackAddr(i.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var l=u.getOrigin(g.href);this._origin=l?l.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,this.url,this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:u.isOriginEqual(this.url,g.href),sameScheme:u.isSchemeEqual(this.url,g.href)},this._ir=new b(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function I(e){return 1e3===e||e>=3e3&&e<=4999}i(w,m),w.prototype.close=function(e,t){if(e&&!I(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(c.quote(e))},w.version=n(5169),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=f.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!n.g.document.body||void 0!==n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName],i=new e(r,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),o=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new v("heartbeat")),void this.transport}if(o)try{t=a.parse(o)}catch(e){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new _(e))}));break;case"m":this.transport,this.dispatchEvent(new _(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},w.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),I(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open")),this.transport):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new v("error"));var o=new y("close");o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n(92052)(w,e),w}},36269:function(){"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,o=String.prototype,i=t.slice,a=n.toString,s=function(e){return"[object Function]"===n.toString.call(e)},c=function(e){return"[object String]"===a.call(e)},u=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=u?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var l=function(t,r,o){for(var i in r)n.hasOwnProperty.call(r,i)&&e(t,i,r[i],o)},d=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function f(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function p(){}l(r,{bind:function(e){var t=this;if(!s(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=i.call(arguments,1),r=function(){if(this instanceof u){var r=t.apply(this,n.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(i.call(arguments)))},o=Math.max(0,t.length-n.length),a=[],c=0;c<o;c++)a.push("$"+c);var u=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(p.prototype=t.prototype,u.prototype=new p,p.prototype=null),u}}),l(Array,{isArray:function(e){return"[object Array]"===a.call(e)}});var h,v,m,g=Object("a"),y="a"!==g[0]||!(0 in g);l(t,{forEach:function(e){var t=d(this),n=y&&c(this)?this.split(""):t,r=arguments[1],o=-1,i=n.length>>>0;if(!s(e))throw new TypeError;for(;++o<i;)o in n&&e.call(r,n[o],o,t)}},(h=t.forEach,v=!0,m=!0,h&&(h.call("foo",(function(e,t,n){"object"!=typeof n&&(v=!1)})),h.call([1],(function(){m="string"==typeof this}),"x")),!(h&&v&&m)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);l(t,{indexOf:function(e){var t=y&&c(this)?this.split(""):d(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=f(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},_);var b,w=o.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(b=void 0===/()??/.exec("")[1],o.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==a.call(e))return w.call(this,e,n);var o,i,s,c,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,l+"g"),r+="",b||(o=new RegExp("^"+e.source+"$(?!\\s)",l)),n=void 0===n?-1>>>0:n>>>0;(i=e.exec(r))&&!((s=i.index+i[0].length)>d&&(u.push(r.slice(d,i.index)),!b&&i.length>1&&i[0].replace(o,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)})),i.length>1&&i.index<r.length&&t.push.apply(u,i.slice(1)),c=i[0].length,d=s,u.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return d===r.length?!c&&e.test("")||u.push(""):u.push(r.slice(d)),u.length>n?u.slice(0,n):u}):"0".split(void 0,0).length&&(o.split=function(e,t){return void 0===e&&0===t?[]:w.call(this,e,t)});var I=o.substr,x="".substr&&"b"!=="0b".substr(-1);l(o,{substr:function(e,t){return I.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},x)},89550:function(e,t,n){"use strict";e.exports=[n(73898),n(50218),n(56788),n(79578),n(6319)(n(79578)),n(16237),n(6319)(n(16237)),n(79222),n(85704),n(6319)(n(79222)),n(52942)]},28755:function(e,t,n){"use strict";var r=n(61660).v,o=n(13247),i=n(41406),a=n(80167),s=n.g.XMLHttpRequest;function c(e,t,n,o){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n,o)}),0)}o(c,r),c.prototype._start=function(e,t,n,r){var o=this;try{this.xhr=new s}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=a.addQuery(t,"t="+ +new Date),this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var u in r.headers)this.xhr.setRequestHeader(u,r.headers[u]);this.xhr.onreadystatechange=function(){if(o.xhr){var e,t,n=o.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&o.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,o.emit("finish",t,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(e){o.emit("finish",0,""),o._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!s;var u=["Active"].concat("Object").join("X");!c.enabled&&u in n.g&&(s=function(){try{return new n.g[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new s);var l=!1;try{l="withCredentials"in new s}catch(e){}c.supportsCORS=l,e.exports=c},96387:function(e,t,n){e.exports=n.g.EventSource},93715:function(e,t,n){"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},79578:function(e,t,n){"use strict";var r=n(13247),o=n(77657),i=n(75092),a=n(20869),s=n(96387);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/eventsource",i,a)}r(c,o),c.enabled=function(){return!!s},c.transportName="eventsource",c.roundTrips=2,e.exports=c},16237:function(e,t,n){"use strict";var r=n(13247),o=n(65894),i=n(81156),a=n(77657);function s(e){if(!o.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/htmlfile",o,i)}r(s,a),s.enabled=function(e){return o.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},17075:function(e,t,n){"use strict";var r=n(13247),o=n(35201),i=n(61660).v,a=n(5169),s=n(80167),c=n(71244),u=n(41406),l=n(36989);function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(o,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}r(d,i),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!s.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=o.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",o.stringify([a,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=o.parse(t.data)}catch(e){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(o.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return c.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},52942:function(e,t,n){"use strict";var r=n(13247),o=n(83434),i=n(53012),a=n(30199);function s(e){if(!s.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/jsonp",a,i)}r(s,o),s.enabled=function(){return!!n.g.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s},77657:function(e,t,n){"use strict";var r=n(13247),o=n(80167),i=n(83434);function a(e,t,n,r){i.call(this,e,t,function(e){return function(t,n,r){var i={};"string"==typeof n&&(i.headers={"Content-type":"text/plain"});var a=o.addPath(t,"/xhr_send"),s=new e("POST",a,n,i);return s.once("finish",(function(e){if(s=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){s.close(),s=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(a,i),e.exports=a},46456:function(e,t,n){"use strict";var r=n(13247),o=n(61660).v;function i(e,t){o.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(i,o),i.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},i.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=i},6319:function(e,t,n){"use strict";var r=n(13247),o=n(17075),i=n(88169);e.exports=function(e){function t(t,n){o.call(this,e.transportName,t,n)}return r(t,o),t.enabled=function(t,r){if(!n.g.document)return!1;var a=i.extend({},r);return a.sameOrigin=!0,e.enabled(a)&&o.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=o.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},26226:function(e,t,n){"use strict";var r=n(13247),o=n(61660).v;function i(e,t,n){o.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(i,o),i.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=i},83434:function(e,t,n){"use strict";var r=n(13247),o=n(80167),i=n(46456),a=n(26226);function s(e,t,n,r,s){var c=o.addPath(e,t),u=this;i.call(this,e,n),this.poll=new a(r,c,s),this.poll.on("message",(function(e){u.emit("message",e)})),this.poll.once("close",(function(e,t){u.poll=null,u.emit("close",e,t),u.close()}))}r(s,i),s.prototype.close=function(){i.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=s},75092:function(e,t,n){"use strict";var r=n(13247),o=n(61660).v,i=n(96387);function a(e){o.call(this);var t=this,n=this.es=new i(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(a,o),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=a},65894:function(e,t,n){"use strict";var r=n(13247),o=n(71244),i=n(80167),a=n(61660).v,s=n(36989);function c(e){a.call(this);var t=this;o.polluteGlobalNamespace(),this.id="a"+s.string(6),e=i.addQuery(e,"c="+decodeURIComponent(o.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?o.createHtmlfile:o.createIframe;n.g[o.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,(function(){t._cleanup(),t._close("permanent")}))}r(c,a),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[o.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in n.g)try{c.htmlfileEnabled=!!new n.g[u]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||o.iframeEnabled,e.exports=c},53012:function(e,t,n){"use strict";var r=n(71244),o=n(36989),i=n(78047),a=n(80167),s=n(13247),c=n(61660).v;function u(e){var t=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+o.string(6);var i=a.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}s(u,c),u.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},u.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){var t,r=this,a=this.script=n.g.document.createElement("script");if(a.id="a"+o.string(8),a.src=e,a.type="text/javascript",a.charset="UTF-8",a.onerror=this._scriptError.bind(this),a.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(a.readyState,/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){r.loadedOkay=!0;try{a.onclick()}catch(e){}}a&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===a.async&&n.g.document.attachEvent)if(i.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=t.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(e){}a.async=!0}void 0!==a.async&&(a.async=!0);var s=n.g.document.getElementsByTagName("head")[0];s.insertBefore(a,s.firstChild),t&&s.insertBefore(t,s.firstChild)},e.exports=u},29828:function(e,t,n){"use strict";var r=n(13247),o=n(61660).v;function i(e,t){o.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(i,o),i.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&this.emit("message",o)}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=i},30199:function(e,t,n){"use strict";var r,o,i=n(36989),a=n(80167);e.exports=function(e,t,s){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(o=n.g.document.createElement("textarea")).name="d",r.appendChild(o),n.g.document.body.appendChild(r));var c="a"+i.string(8);r.target=c,r.action=a.addQuery(a.addPath(e,"/jsonp_send"),"i="+c);var u=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(c);u.id=c,u.style.display="none",r.appendChild(u);try{o.value=t}catch(e){}r.submit();var l=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){u.parentNode.removeChild(u),u=null}),500),o.value="",s(e))};return u.onerror=function(){l()},u.onload=function(){l()},u.onreadystatechange=function(e){u.readyState,"complete"===u.readyState&&l()},function(){l(new Error("Aborted"))}}},24211:function(e,t,n){"use strict";var r=n(61660).v,o=n(13247),i=n(41406),a=n(78047),s=n(80167);function c(e,t,n){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n)}),0)}o(c,r),c.prototype._start=function(e,t,r){var o=this,a=new n.g.XDomainRequest;t=s.addQuery(t,"t="+ +new Date),a.onerror=function(){o._error()},a.ontimeout=function(){o._error()},a.onprogress=function(){a.responseText,o.emit("chunk",200,a.responseText)},a.onload=function(){o.emit("finish",200,a.responseText),o._cleanup(!1)},this.xdr=a,this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!a.hasDomain()),e.exports=c},20869:function(e,t,n){"use strict";var r=n(13247),o=n(28755);function i(e,t,n,r){o.call(this,e,t,n,r)}r(i,o),i.enabled=o.enabled&&o.supportsCORS,e.exports=i},98115:function(e,t,n){"use strict";var r=n(61660).v;function o(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),o.timeout)}n(13247)(o,r),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,e.exports=o},81156:function(e,t,n){"use strict";var r=n(13247),o=n(28755);function i(e,t,n){o.call(this,e,t,n,{noCredentials:!0})}r(i,o),i.enabled=o.enabled,e.exports=i},73898:function(e,t,n){"use strict";var r=n(41406),o=n(80167),i=n(13247),a=n(61660).v,s=n(93715);function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");a.call(this);var i=this,u=o.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new s(this.url,[],n),this.ws.onmessage=function(e){e.data,i.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){i.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,i.emit("close",e.code,e.reason),i._cleanup()},this.ws.onerror=function(e){i.emit("close",1006,"WebSocket connection broken"),i._cleanup()}}i(c,a),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!s},c.transportName="websocket",c.roundTrips=2,e.exports=c},85704:function(e,t,n){"use strict";var r=n(13247),o=n(77657),i=n(56788),a=n(29828),s=n(24211);function c(e){if(!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",a,s)}r(c,o),c.enabled=i.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},56788:function(e,t,n){"use strict";var r=n(13247),o=n(77657),i=n(29828),a=n(24211);function s(e){if(!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}r(s,o),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(a.enabled&&e.sameScheme)},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},79222:function(e,t,n){"use strict";var r=n(13247),o=n(77657),i=n(29828),a=n(20869),s=n(81156);function c(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",i,a)}r(c,o),c.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||a.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},50218:function(e,t,n){"use strict";var r=n(13247),o=n(77657),i=n(29828),a=n(20869),s=n(81156),c=n(78047);function u(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}r(u,o),u.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&a.enabled)},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!n.g.document,e.exports=u},70077:function(e,t,n){"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},78047:function(e,t,n){"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},29719:function(e,t,n){"use strict";var r,o=n(35201),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=o.stringify(e);return i.lastIndex=0,i.test(t)?(r||(r=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(i)),t.replace(i,(function(e){return r[e]}))):t}}},41406:function(e,t,n){"use strict";var r=n(36989),o={},i=!1,a=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(a)return null;var t=r.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}};a||e.exports.attachEvent("unload",(function(){i||(i=!0,e.exports.triggerUnloadCallbacks())}))},71244:function(e,t,n){"use strict";var r=n(41406),o=n(35201),i=n(78047);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var o,i,a=n.g.document.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout((function(){a&&a.parentNode.removeChild(a),a=null}),0),r.unloadDel(i))},u=function(e){a&&(c(),t(e))};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout((function(){u("onload timeout")}),2e3)},n.g.document.body.appendChild(a),o=setTimeout((function(){u("timeout")}),15e3),i=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:s}},createHtmlfile:function(t,o){var i,a,s,c=["Active"].concat("Object").join("X"),u=new n.g[c]("htmlfile"),l=function(){clearTimeout(i),s.onerror=null},d=function(){u&&(l(),r.unloadDel(a),s.parentNode.removeChild(s),s=u=null,CollectGarbage())},f=function(e){u&&(d(),o(e))};u.open(),u.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var p=u.createElement("div");return u.body.appendChild(p),s=u.createElement("iframe"),p.appendChild(s),s.src=t,s.onerror=function(){f("onerror")},i=setTimeout((function(){f("timeout")}),15e3),a=r.unloadAdd(d),{post:function(e,t){try{setTimeout((function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:d,loaded:l}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"==typeof n.g.postMessage||"object"==typeof n.g.postMessage)&&!i.isKonqueror())},51998:function(e,t,n){"use strict";var r={};["log","debug","warn"].forEach((function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(e){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log})),e.exports=r},88169:function(e){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},36989:function(e,t,n){"use strict";var r=n(70077),o="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=o.length,n=r.randomBytes(e),i=[],a=0;a<e;a++)i.push(o.substr(n[a]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},35792:function(e){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},80167:function(e,t,n){"use strict";var r=n(43299);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},5169:function(e){e.exports="1.5.0"},78389:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}}),e=n.hmd(e);var r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?global:e)},43299:function(e,t,n){"use strict";n(55674);var r=n(93491),o=n(98891),i=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,a=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(s,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function d(e){"undefined"!=typeof window?window:void 0!==n.g?global:"undefined"!=typeof self?n.g=self:n.g={};var t,r=n.g.location||{},o={},a=typeof(e=e||r);if("blob:"===e.protocol)o=new p(unescape(e.pathname),{});else if("string"===a)for(t in o=new p(e,{}),l)delete o[t];else if("object"===a){for(t in e)t in l||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=i.test(e.href))}return o}function f(e){e=c(e);var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&t[2].length>=2),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function p(e,t,n){if(e=c(e),!(this instanceof p))return new p(e,t,n);var i,a,s,l,h,v,m=u.slice(),g=typeof t,y=this,_=0;for("object"!==g&&"string"!==g&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=d(t),i=!(a=f(e||"")).protocol&&!a.slashes,y.slashes=a.slashes||i&&t.slashes,y.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(m[3]=[/(.*)/,"pathname"]);_<m.length;_++)"function"!=typeof(l=m[_])?(s=l[0],v=l[1],s!=s?y[v]=e:"string"==typeof s?~(h=e.indexOf(s))&&("number"==typeof l[2]?(y[v]=e.slice(0,h),e=e.slice(h+l[2])):(y[v]=e.slice(h),e=e.slice(0,h))):(h=s.exec(e))&&(y[v]=h[1],e=e.slice(0,h.index)),y[v]=y[v]||i&&l[3]&&t[v]||"",l[4]&&(y[v]=y[v].toLowerCase())):e=l(e);n&&(y.query=n(y.query)),i&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(y.pathname,t.pathname)),"/"!==y.pathname.charAt(0)&&y.hostname&&(y.pathname="/"+y.pathname),r(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(l=y.auth.split(":"),y.username=l[0]||"",y.password=l[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;default:i[e]=t}for(var s=0;s<u.length;s++){var c=u[s];c[4]&&(i[c[1]]=i[c[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},p.extractProtocol=f,p.location=d,p.trimLeft=c,p.qs=o,e.exports=p},76091:function(e,t,n){var r=n(47293),o=n(81361);e.exports=function(e){return r((function(){return!!o[e]()||""!=""[e]()||o[e].name!==e}))}},53111:function(e,t,n){var r=n(84488),o="["+n(81361)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},81361:function(e){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},55674:function(e,t,n){"use strict";var r=n(82109),o=n(53111).start,i=n(76091)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})}}]);
//# sourceMappingURL=3720-8d25492e4917fc9f2b1c.js.map