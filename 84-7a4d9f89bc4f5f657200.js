/*! For license information please see 84-7a4d9f89bc4f5f657200.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{"+ICs":function(e,t,n){"use strict";(function(t){var r=n("wK5r"),o={},i=!1,a=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){void 0!==t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){void 0!==t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(a)return null;var t=r.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}};a||e.exports.attachEvent("unload",(function(){i||(i=!0,e.exports.triggerUnloadCallbacks())}))}).call(this,n("yLpj"))},"+iVA":function(e,t,n){"use strict";var r=n("41W/").EventEmitter,o=n("P7XM"),i=n("kwwM"),a=n("XoJ6");function s(e,t){r.call(this);var n=this,o=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var r,s;if(200===e){if(s=+new Date-o,t)try{r=i.parse(t)}catch(c){}a.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}o(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=s},"+x1K":function(e,t,n){"use strict";var r=n("kwwM"),o=n("2EN1");function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){o.postMessage("c",r.stringify([e,t]))},i.prototype._transportMessage=function(e){o.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},"0yEH":function(e,t,n){"use strict";var r=n("P7XM"),o=n("41W/").EventEmitter,i=n("3Iy2");function a(e){o.call(this);var t=this,n=this.es=new i(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(a,o),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=a},"2EN1":function(e,t,n){"use strict";(function(t){var r=n("+ICs"),o=n("kwwM"),i=n("I3Mb");e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,r){t.parent!==t&&t.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:n,data:r||""}),"*")},createIframe:function(e,n){var o,i,a=t.document.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout((function(){a&&a.parentNode.removeChild(a),a=null}),0),r.unloadDel(i))},u=function(e){a&&(c(),n(e))};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout((function(){u("onload timeout")}),2e3)},t.document.body.appendChild(a),o=setTimeout((function(){u("timeout")}),15e3),i=r.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}}),0)},cleanup:c,loaded:s}},createHtmlfile:function(n,o){var i,a,s,c=["Active"].concat("Object").join("X"),u=new t[c]("htmlfile"),l=function(){clearTimeout(i),s.onerror=null},d=function(){u&&(l(),r.unloadDel(a),s.parentNode.removeChild(s),s=u=null,CollectGarbage())},p=function(e){u&&(d(),o(e))};u.open(),u.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var f=u.createElement("div");return u.body.appendChild(f),s=u.createElement("iframe"),f.appendChild(s),s.src=n,s.onerror=function(){p("onerror")},i=setTimeout((function(){p("timeout")}),15e3),a=r.unloadAdd(d),{post:function(e,t){try{setTimeout((function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}),0)}catch(n){}},cleanup:d,loaded:l}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!i.isKonqueror())}).call(this,n("yLpj"))},"2fH1":function(e,t,n){"use strict";(function(t){var r=n("P7XM"),o=n("WsSN"),i=n("aXJd"),a=n("aumc"),s=n("ZS6Q"),c=n("I3Mb");function u(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}r(u,o),u.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&a.enabled)},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!t.document,e.exports=u}).call(this,n("yLpj"))},"3Iy2":function(e,t,n){(function(t){e.exports=t.EventSource}).call(this,n("yLpj"))},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"41W/":function(e,t,n){"use strict";var r=n("P7XM"),o=n("uAge");function i(){o.call(this)}r(i,o),i.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},i.prototype.once=function(e,t){var n=this,r=!1;this.on(e,(function o(){n.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}))},i.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,r)}},i.prototype.on=i.prototype.addListener=o.prototype.addEventListener,i.prototype.removeListener=o.prototype.removeEventListener,e.exports.EventEmitter=i},"49Cj":function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return Kt})),n.d(t,"debug",(function(){return Qt})),n.d(t,"parseFile",(function(){return We})),n.d(t,"parseFilledForm",(function(){return Fe})),n.d(t,"parseMessage",(function(){return Je})),n.d(t,"parseRichMessage",(function(){return Ge})),n.d(t,"parseSystemMessage",(function(){return Be})),n.d(t,"parseEvent",(function(){return ze})),n.d(t,"parseGreeting",(function(){return Ye}));n("E9XD");var r={}.hasOwnProperty;function o(e,t){return r.call(t,e)}function i(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}var a=Array.isArray;function s(e){return"object"==typeof e&&null!==e&&!a(e)}function c(e,t){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r]),n}),{})}function u(e){return e}function l(){return Math.random().toString(36).substring(2)}function d(e){var t=l();return o(t,e)?d(e):t}function p(e,t){for(var n="string"==typeof e?e.split("."):e,r=0,o=t;o&&r<n.length;)o=o[n[r++]];return o}function f(e){return 0===(a(e)?e:Object.keys(e)).length}function h(){}function v(e,t){var n,r="function"==typeof e?e:function(t){return p(e,t)};return(a(t)?[].concat(t):(n=t,Object.keys(n).map((function(e){return n[e]})))).sort((function(e,t){return r(e)-r(t)}))}function m(e,t){return e.reduce((function(e,n){return e[n]=t[n],e}),{})}function y(e,t){return e.reduce((function(e,n){return o(n,t)&&(e[n]=t[n]),e}),{})}var _=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};var g=function(e,t){return e===t?0:e<t?-1:1};function b(e,t){var n=[];return t.filter((function(t){var r=e(t);return-1===n.indexOf(r)&&(n.push(r),!0)}))}var w=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},I=n("bCCX"),E=function(){return Math.random().toString(36).substring(7).split("").join(".")},x={INIT:"@@redux/INIT"+E(),REPLACE:"@@redux/REPLACE"+E(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+E()}};function T(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function S(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(S)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,i=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var n=s.indexOf(e);s.splice(n,1),a=null}}}function p(e){if(!T(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,i=o(i,e)}finally{c=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:x.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[I.a]=function(){return this},e}return p({type:x.INIT}),(r={dispatch:p,subscribe:d,getState:l,replaceReducer:f})[I.a]=h,r}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var N="__test_storage_support__",P=function(){var e=Object.defineProperties({},{getItem:{value:function(t){return e[t]||null}},setItem:{value:function(t,n){try{e[t]=String(n)}catch(r){}}},removeItem:{value:function(t){delete e[t]}},clear:{value:function(){Object.keys(e).forEach(e.removeItem)}},key:{value:function(t){return Object.keys(e)[t]||null}},length:{get:function(){return Object.keys(e).length}}});return e}(),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";try{var t=window[e+"Storage"];return t.setItem(N,!0),t.getItem(N),t.removeItem(N),!0}catch(n){return!1}}()?window.localStorage:P,M={setItem:function(e,t){return new Promise((function(n){return n(A.setItem(e,t))}))},getItem:function(e){return new Promise((function(t){return t(A.getItem(e))}))},removeItem:function(e){return new Promise((function(t){return t(A.removeItem(e))}))}},q=function(e){return new Promise((function(t){t(e())}))},L=n("C2QD"),R=n.n(L),D=n("JaA5"),U=n.n(D),X=function(e){return _(e).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")};var W=/[^:]+:\/\/[^(/|?)\s]+/,F=function(e){return e.replace(/\w/g,"$&[\\r\\n\\t]*")},J=(new RegExp("^[\0-]*("+F("javascript")+"|"+F("data")+"):","i"),n("VeNG")),H=n.n(J);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var B=n("FLdU").a,z=function(){var e=Object.create(null),t=B(e);return G({},t,{off:function(n,r){n?t.off(n,r):Object.keys(e).forEach((function(t){delete e[t]}))},once:function(e,n){t.on(e,(function r(o,i){t.off(e,r),n(o,i)}))}})},Y=function(e,t){var n,r=void 0===t?{}:t,o=r.query,i=r.transports,a=void 0===i?["websocket","xhr-polling"]:i,s=e+(o?"?"+X(o):""),c=z(),u=function(e){var t=e.min,n=void 0===t?1e3:t,r=e.max,o=void 0===r?5e3:r,i=e.jitter,a=void 0===i?.5:i,s=0;return{duration:function(){var e=n*Math.pow(2,s++);if(a){var t=Math.random(),r=Math.floor(t*a*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,o)},reset:function(){s=0}}}({min:1e3,max:5e3,jitter:.5}),l=3,d=null,p=function(){l=1,u.reset(),c.emit("connect")},f=function(){l=3,d=null,c.emit("disconnect"),_()},h=function(e){var t=e.data;c.emit("message",t)},v=function(){c.emit("heartbeat")},m=function(){var e;(l=3,d)&&((e=d).removeEventListener("open",p),e.removeEventListener("close",f),e.removeEventListener("message",h),e.removeEventListener("heartbeat",v),d.close(),d=null)},y=function(){var e;l=0,d=new H.a(s,void 0,{transports:a}),(e=d).addEventListener("open",p),e.addEventListener("close",f),e.addEventListener("message",h),e.addEventListener("heartbeat",v)},_=function(e){void 0===e&&(e=u.duration()),clearTimeout(n),0!==e?n=setTimeout(y,e):y()},g={connect:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){if(3!==l)throw new Error("Socket is already open or connecting.");clearTimeout(n),y()})),destroy:function(){g.off(),g.disconnect()},disconnect:function(){l=3,clearTimeout(n),m()},reconnect:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){m(),_(e)})),emit:function(e){if(1!==l)throw new Error("Socket is not connected.");d.send(e)},getReadyState:function(){return l},on:c.on,off:c.off};return g};function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Q=function(e,t){var n,r,o,i,a,s=void 0===t?{}:t,c=s.query,u=void 0===c?{}:c,d=s.rescheduleTimeout,p=void 0===d?3e4:d,f=s.transports,v=s.emitter,m=void 0===v?z():v,y=Y(e,{query:Z({bh:l()},u),transports:f}),_=(o=h,{cancel:function(){clearTimeout(r),o=h},check:function(){var e=w();return o=e.resolve,r=setTimeout((function(){var t=new Error("Timeout.");t.code="TIMEOUT",e.reject(t)}),2e3),e.promise},resolve:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(r),o()}))}),g=function(){return 1===y.getReadyState()},b=function(e){y.emit(JSON.stringify(e)),E()},I=function(){b({action:"ping"})},E=function(){clearTimeout(n),n=setTimeout(I,p)},x=function(){_.cancel(),clearTimeout(n)};return i=y,a=m,["connect","disconnect"].forEach((function(e){i.on(e,(function(t){a.emit(e,t)}))})),y.on("connect",E),y.on("disconnect",x),y.on("heartbeat",I),y.on("message",(function(e){_.resolve();var t=JSON.parse(e);"ping"!==t.action&&m.emit("message",t)})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){g()&&(_.check().then((function(){_.cancel(),m.emit("connection_recovered")}),(function(e){if(_.cancel(),"TIMEOUT"!==e.code)throw e;y.reconnect()})),I())})),window.addEventListener("offline",(function(){_.cancel(),g()&&m.emit("connection_unstable")}))),Z({},y,{destroy:function(){x(),y.destroy()},disconnect:function(){x(),y.disconnect()},reconnect:function(e){x(),y.reconnect(e)},emit:b,on:m.on,off:m.off})},K=function(e,t,n){var r=void 0===n?{}:n,o=r.headers,i=r.method,a=void 0===i?"POST":i,s=r.onProgress,c=r.withCredentials,u=void 0!==c&&c,l=new XMLHttpRequest;return{promise:new Promise((function(n,r){var i,c;"function"==typeof s&&(l.upload.onprogress=function(e){s(e.loaded/e.total)}),l.onload=function(){var e;try{e=JSON.parse(l.response)}catch(t){e=l.response}if(l.status>=200&&l.status<300)n(e);else{var t=new Error("Upload failed.");t.code="UPLOAD_FAILED",t.response=e,r(t)}},l.onerror=function(){var e=new Error("Upload failed.");e.code="UPLOAD_FAILED",r(e)},l.onabort=function(){var e=new Error("Upload canceled.");e.code="UPLOAD_CANCELED",r(e)},l.open(a,e),l.withCredentials=u,o&&Object.keys(o).forEach((function(e){return l.setRequestHeader(e,o[e])})),l.send((i=t,c=new FormData,Object.keys(i).forEach((function(e){return c.append(e,i[e])})),c))})),cancel:function(){l.abort()}}};document.documentElement.currentStyle,n("BYAM");var V=function(e,t,n){var r,o,i,a;return""+("production"===n?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+n+"."))+(o=(r=e).uniqueGroups,i=r.licenseId,a=r.groupId,(o?"/licence/g"+i+"_"+a:"")+"/customer")+"?"+X(function(e,t){var n=e.clientId,r=e.licenseId;return{license_id:String(r),flow:"button",response_type:"token",client_id:n,redirect_uri:t,post_message_uri:t,state:"@livechat/customer-auth"}}(e,t))},$=function(e){var t=e.code,n=e.message,r=new Error(n);return r.code=t,r},ee=function(e,t){var n,r,o=document.createElement("iframe");return o.style.display="none",o.setAttribute("src",V(e,(n=String(window.location),((r=n.match(W))&&r[0])+window.location.pathname),t)),o},te=function(e,t){var n=e.licenseId,r=function(e){return"production"===e?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+e+".")}(t);return new Promise((function(o,i){var a=ee(e,t),s=function(){var e,t;(t=(e=a).parentNode)&&t.removeChild(e),window.removeEventListener("message",u,!1)},c=setTimeout((function(){s(),i($({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))}),15e3),u=function(e){var t=e.origin,a=e.data;if(t===r&&function(e){return e&&"@livechat/customer-auth"===e.state}(a)){clearTimeout(c),s();try{o(function(e,t){if("identity_exception"in e)throw $({code:"SSO_IDENTITY_EXCEPTION",message:e.identity_exception});if("oauth_exception"in e)throw $({code:"SSO_OAUTH_EXCEPTION",message:e.oauth_exception});return{accessToken:e.access_token,entityId:e.entity_id,expiresIn:1e3*e.expires_in,tokenType:e.token_type,creationDate:Date.now(),licenseId:t}}(a,n))}catch(u){i(u)}}};window.addEventListener("message",u,!1),new Promise((function(e){!function t(){document.body?e(document.body):setTimeout(t,100)}()})).then((function(e){e.appendChild(a)}))}))},ne=function(e){var t=e.licenseId,n=e.clientId;if("number"!=typeof t||"string"!=typeof n)throw new Error("You need to pass valid configuration object: { licenseId, clientId }.")},re=function(e,t){ne(e);var n="@@lc_auth_token:"+e.licenseId+(e.uniqueGroups?":"+e.groupId:""),r=null,o=null,i=M.getItem(n).then((function(e){null!==i&&(i=null,e&&(o=JSON.parse(e)))})),a=function(){return r=te(e,t).then((function(e){return r=null,M.setItem(n,JSON.stringify(e)),o=e,e}),(function(e){throw r=null,e}))};return{getFreshToken:a,getToken:function e(){return r||(!o||(n=(t=o).creationDate,s=t.expiresIn,Date.now()>=n+s)?i?i.then(e):a():Promise.resolve(o));var t,n,s},hasToken:function e(){return i?i.then(e):Promise.resolve(!!o)},invalidate:function(){return o=null,i=null,M.removeItem(n)}}};function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function ae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var se=function(e){return e.connection.status},ce=function(e,t){return e.requests[t]},ue=function(e){return e.users.self.id},le=function(e,t){var n=e.chats[t];return!!n&&n.active},de=function(e){return"connected"===se(e)},pe=function(e){var t,n,r,o=e.region;return"https://api"+(o?"-"+o:"")+(n=(t=e).licenseId,r=t.env,(1520===n?".staging":"production"===r?"":"."+r)+".livechatinc.com")},fe=function(e){return pe(e)+"/v3.2/customer"},he=function(e,t){var n=t.id;return oe({},e,{requests:ie(e.requests,[n].map(ae))})},ve=function(e,t){return oe({},t,{connection:oe({},t.connection,{status:e})})},me=function(e){var t,n,r;return n=e,(t={}).change_region=function(e,t){return oe({},e,{region:t.region})},t.destroy=function(e){return ve("destroyed",e)},t.login_success=function(e){return ve("connected",e)},t.pause_connection=function(e){return ve("paused",e)},t.request_failed=he,t.response_received=he,t.send_request=function(e,t){var n,r=t.promise,o=t.resolve,i=t.reject,a=t.id,s=t.request;return oe({},e,{requests:oe({},e.requests,(n={},n[a]={id:a,promise:r,resolve:o,reject:i,request:s},n))})},t.set_chat_active=function(e,t){var n,r=t.id,o=t.active;return oe({},e,{chats:oe({},e.chats,(n={},n[r]=oe({},e.chats[r],{active:o}),n))})},t.set_self_id=function(e,t){return oe({},e,{users:oe({},e.users,{self:oe({},e.users.self,{id:t.id})})})},t.socket_disconnected=function(e){var t=se(e);return oe({},ve("disconnected"===t?"disconnected":"reconnecting",e),{requests:{}})},t.update_customer_page=function(e,t){return oe({},e,{page:oe({},e.page,t)})},(r=t)[void 0]&&console.warn(["Reducer contains an 'undefined' action type.","Have you misspelled a constant?"].join("\n")),function(e,t){return void 0===e&&(e=n),o(t.type,r)?r[t.type](e,t.payload):e}};function ye(e){var t=u,n=function(){var e=[],t=function(t){return function(n){return function(r){var o=n(r);return e.forEach((function(e){e(r,t)})),o}}};return t.add=function(t){e.push(t)},t}(),r=S(me(function(e){var t=e.application,n=void 0===t?{}:t,r=e.licenseId,o=e.groupId,i=void 0===o?null:o,a=e.env,s=e.page,c=void 0===s?null:s,u=e.region,l=void 0===u?null:u,d=e.referrer,p=void 0===d?null:d,f=e.uniqueGroups,h=void 0!==f&&f,v=e.mobile,m=void 0!==v&&v;return{application:oe({},n,{name:"customer_sdk",version:"2.0.4"}),licenseId:r,env:a,groupId:i,chats:{},connection:{status:"disconnected"},page:c,region:l,referrer:p,requests:{},users:{self:{id:null,type:"customer"},others:{}},uniqueGroups:h,mobile:m}}(e)),t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return k({},n,{dispatch:r=C.apply(void 0,i)(n.dispatch)})}}}(n)));return r.addSideEffectsHandler=n.add,r}function _e(e){var t=e.message,n=e.code,r=new Error(t);return r.code=n,r}var ge=function(e){var t={};return"string"==typeof e.customId&&(t.custom_id=e.customId),s(e.properties)&&(t.properties=e.properties),t},be=function(e){switch(e.type){case"message":var t=oe({},ge(e),{type:e.type,text:e.text});return e.postback&&(t.postback={id:e.postback.id,thread_id:e.postback.threadId,event_id:e.postback.eventId,type:e.postback.type,value:e.postback.value}),t;case"file":return oe({},ge(e),{type:e.type,url:e.url});case"filled_form":return oe({},ge(e),{type:e.type,form_id:e.formId,fields:e.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.groupId;return oe({},e,{answer:oe({},ie(t,["groupId"]),{group_id:n})});default:return e}}))});case"system_message":var n=oe({},ge(e),{type:e.type,text:e.text,system_message_type:e.systemMessageType});return e.recipients&&(n.recipients=e.recipients),n}},we=function(e){var t=e.chat,n=e.continuous,r={chat:{}};if("boolean"==typeof n&&(r.continuous=n),!t)return r;var o=t.access,i=t.thread,a=t.properties;return o&&o.groupIds&&(r.chat.access={group_ids:o.groupIds}),a&&(r.chat.properties=a),i&&(r.chat.thread=function(e){var t={},n=e.events,r=e.properties;return n&&(t.events=n.map(be)),r&&(t.properties=r),t}(i)),r},Ie=function(e){return _(e).map((function(e){var t,n=e[0],r=e[1];return(t={})[n]=r,t}))},Ee=function(e){var t=y(["avatar","name","email"],e);return e.sessionFields&&(t.session_fields=Ie(e.sessionFields)),t},xe=function(e){return{type:"destroy",payload:{reason:e}}},Te=function(e){return void 0===e&&(e=!1),{type:"prefetch_token",payload:{fresh:e}}},Se=function(e){return{type:"reconnect",payload:{delay:e}}},Oe=function(e,t,n){return{type:"send_request",payload:oe({request:{action:e,payload:t}},n&&{source:n})}},je=function(e,t){return{type:"set_chat_active",payload:{id:e,active:t}}},ke=function(e){return{type:"set_self_id",payload:{id:e}}},Ce=function(e,t){t.payload.id=d(e.getState().requests);var n=w(),r=n.resolve,o=n.reject,i=n.promise;return t.payload.promise=i,t.payload.resolve=r,t.payload.reject=o,e.dispatch(t),i},Ne=function(e){var t=e.getState(),n=t.licenseId,r=t.groupId;return"side_storage_"+n+(t.uniqueGroups?":"+r:"")},Pe=function(e){return M.getItem(Ne(e)).catch(h).then((function(e){return JSON.parse(e||"{}")})).catch((function(){return{}}))},Ae=function(e,t,n){return Ce(e,Oe(t,n,"login"))};function Me(e,t){var n,r,o=null,i=new R.a({min:300,max:6e4,jitter:.3}),a=function(e){return n.dispatch(xe(e))},s=function(){return n.dispatch(Se(i.duration()))},c=function(){return Promise.all([e.getToken(),Pe(n)])},u=function(e){var t=e[0],r=e[1],o=ue(n.getState());if(null===o)n.dispatch(ke(t.entityId));else if(o!==t.entityId){var i=new Error("Identity has changed.");throw i.code="IDENTITY_MISMATCH",i}return[t,r]},l=function(e){var r,i=e[0],a=e[1],s=n.getState(),c=s.application,u=s.groupId,l=s.page,d=s.referrer,p=s.mobile,f={token:i.tokenType+" "+i.accessToken,customer:"function"==typeof t?Ee(t()):{},customer_side_storage:a,is_mobile:p,application:m(["name","version"],c)};return"number"==typeof u&&(f.group_id=u),c.channelType&&(f.application.channel_type=c.channelType),null!==l&&(o=l,f.customer_page=l),null!==d&&(f.referrer=d),Promise.race([Ae(n,"login",f),(r=15e3,new Promise((function(e){setTimeout(e,r)}))).then((function(){return Promise.reject(_e({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))}))])};return function(t){var d,p,f,v;n=t,r&&r.cancel(),d=function(e){var t;r=null,i.reset(),t=n.getState().page,o!==t&&Ae(n,"update_customer_page",t).catch(h),o=null,n.dispatch({type:"login_success",payload:e})},p=function(t){switch(t.code){case"AUTHENTICATION":return e.getFreshToken(),void s();case"CONNECTION_LOST":case"MISDIRECTED_CONNECTION":return;case"SSO_IDENTITY_EXCEPTION":case"SSO_OAUTH_EXCEPTION":return"server_error"===t.message||"temporarily_unavailable"===t.message?void s():void a(t.message);case"IDENTITY_MISMATCH":case"CUSTOMER_BANNED":case"USERS_LIMIT_REACHED":case"WRONG_PRODUCT_VERSION":return void a(t.code.toLowerCase());default:return void s()}},f=[c,u,l].slice(0),v=!1,function e(t){var n=f.shift();q((function(){return n(t)})).then((function(t){v||(f.length?e(t):d(t))}),(function(e){v||p(e)}))}(),r={cancel:function(){v=!0}}}}var qe,Le=function(e,t){var n=e.getState,r=e.dispatch,o=function(e){return e.requests}(n());r({type:"fail_all_requests",payload:{rejects:Object.keys(o).map((function(e){return o[e].reject})),reason:t}})},Re=function(e,t,n){var r=e.getState,o=e.dispatch,i=t.payload.id;o({type:"request_failed",payload:{id:i,reject:r().requests[i].reject,error:n}})},De=Object.freeze({success:!0}),Ue=function(e,t){var n={id:t.id,authorId:t.author_id,createdAt:t.created_at,threadId:e,properties:t.properties||{}};return void 0!==t.custom_id&&(n.customId=t.custom_id),n},Xe=function(e,t){var n,r,o,i,a;t.height>t.width?(r="height",o="width",i=t.height,a=t.width):(r="width",o="height",i=t.width,a=t.height);var s=e/i;return(n={})[r]=Math.ceil(Math.min(i,e)),n[o]=Math.ceil(Math.min(s*a,a)),n},We=function(e,t){return void 0!==t.width&&void 0!==t.height?function(e,t){return oe({},Ue(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name,width:t.width,height:t.height,thumbnails:{default:oe({url:t.thumbnail_url},Xe(300,t)),high:oe({url:t.thumbnail2x_url},Xe(600,t))}})}(e,t):oe({},Ue(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name})},Fe=function(e,t){return oe({},Ue(e,t),{type:"filled_form",formId:t.form_id,fields:t.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.group_id;return oe({},e,{answer:oe({},ie(t,["group_id"]),{groupId:n})});default:return e}}))})},Je=function(e,t){return oe({},Ue(e,t),{type:"message",text:t.text})},He=function(e){var t={};if("string"==typeof e.title&&(t.title=e.title),"string"==typeof e.subtitle&&(t.subtitle=e.subtitle),e.image){var n=e.image;t.image={url:n.url,name:n.name}}return e.buttons&&(t.buttons=e.buttons.map((function(e){switch(e.type){case"message":case"phone":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};case"url":var t={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return e.target&&(t.target=e.target),t;case"webview":var n={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return"string"==typeof e.webview_height&&(n.webviewHeight=e.webview_height),n;default:return{text:e.text,postbackId:e.postback_id,userIds:e.user_ids,role:e.role||"default"}}}))),t},Ge=function(e,t){switch(t.template_id){case"cards":case"quick_replies":case"sticker":return oe({},Ue(e,t),{type:"rich_message",template:t.template_id,elements:t.elements.map(He)});default:return null}},Be=function(e,t){var n=oe({},Ue(e,oe({},t,{author_id:"system"})),{type:"system_message",text:t.text,systemMessageType:t.system_message_type});return t.text_vars&&(n.textVars=t.text_vars),n},ze=function(e,t){switch(t.type){case"file":return We(e,t);case"filled_form":return Fe(e,t);case"message":return Je(e,t);case"rich_message":return Ge(e,t);case"system_message":return Be(e,t);default:return null}},Ye=function(e){return{id:e.id,addon:e.addon||null,uniqueId:e.unique_id,displayedFirstTime:e.displayed_first_time,accepted:e.accepted||!1,event:ze(null,e.event),agent:{id:e.agent.id,name:e.agent.name,avatar:e.agent.avatar,jobTitle:e.agent.job_title,isBot:e.agent.is_bot||!1}}},Ze=function(e){return void 0===e&&(e={}),e.group_ids?{groupIds:e.group_ids}:{}},Qe=function(e){return c((function(e){return e.events_seen_up_to?e.events_seen_up_to:null}),(t="id",e.reduce((function(e,n){return e[n[t]]=n,e}),{})));var t},Ke=function(e,t){var n=t.properties||{};return{id:t.id,chatId:e,active:t.active,access:Ze(t.access),createdAt:t.created_at,userIds:t.user_ids,events:t.events.map((function(e){return ze(t.id,e)})).filter(Boolean),properties:n,previousThreadId:t.previous_thread_id||null,nextThreadId:t.next_thread_id||null,queue:t.queue?rt(t.queue):null}},Ve=function(e){return{id:e.id,access:Ze(e.access),users:e.users.map(ot),properties:e.properties||{},thread:Ke(e.id,e.thread),eventsSeenUpToMap:Qe(e.users)}},$e=function(e){var t=y(["avatar","email","name"],e);return e.session_fields&&(t.sessionFields=e.session_fields.reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=t[n],e}),{})),t},et=function(e){var t=$e(e);return oe({id:e.id,type:"customer"},t,{sessionFields:t.sessionFields||{}})},tt=function(e){var t=e.statistics;return oe({},et(e),{statistics:{chatsCount:t.chats_count,threadsCount:t.threads_count,visitsCount:t.visits_count,pageViewsCount:t.page_views_count,greetingsShownCount:t.greetings_shown_count,greetingsAcceptedCount:t.greetings_accepted_count}})},nt=function(e){return{position:e.position,waitTime:e.wait_time}},rt=function(e){return oe({},nt(e),{queuedAt:e.queued_at})},ot=function(e){return"customer"===e.type?oe({},et(n=e),{present:n.present}):{id:(t=e).id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,present:t.present};var t,n},it=((qe={}).CONNECTION_LOST="Connection lost.",qe.MISDIRECTED_CONNECTION="Connected to wrong region.",qe),at=function(e,t){var n=e.getState();switch(t.type){case"push_response_received":case"push_received":switch(t.payload.action){case"chat_deactivated":return void e.dispatch(je(t.payload.payload.chatId,!1));case"incoming_chat":return void e.dispatch(je(t.payload.payload.chat.id,!0));default:return}case"response_received":switch(t.payload.action){case"list_chats":return void t.payload.payload.chatsSummary.filter((function(e){var t=e.id,r=e.active;return le(n,t)!==r})).forEach((function(t){var n=t.id,r=t.active;e.dispatch(je(n,r))}));default:return}}},st=function(e,t){t.forEach((function(t){if("present"in t){var n=ie(t,["present"]);e("user_data",n)}else if("customer"!==t.type)e("user_data",t);else{var r=ie(t,["statistics"]);e("user_data",r)}}))},ct=function(e,t){var n=e.emit,r=e.store,o=t.payload;switch(o.action){case"thread_properties_updated":return o.payload.properties.lc2&&"queue_pos"in o.payload.properties.lc2&&n("queue_position_updated",{chatId:o.payload.chatId,threadId:o.payload.threadId,queue:{position:o.payload.properties.lc2.queue_pos,waitTime:o.payload.properties.lc2.queue_waiting_time}}),void n("thread_properties_updated",o.payload);case"customer_side_storage_updated":return void function(e,t){M.setItem(Ne(e),JSON.stringify(t)).catch(h)}(r,o.payload.customer_side_storage);case"customer_disconnected":switch(o.payload.reason){case"access_token_expired":r.dispatch(Te(!0)),r.dispatch(Se(100)),n("disconnected",o.payload);break;case"customer_banned":case"customer_temporarily_blocked":case"license_not_found":case"product_version_changed":case"too_many_connections":case"unsupported_version":r.dispatch(xe(o.payload.reason));break;case"misdirected_connection":Le(r,"MISDIRECTED_CONNECTION"),r.dispatch({type:"change_region",payload:o.payload.data});break;case"too_many_unauthorized_connections":Le(r,"TOO_MANY_UNAUTHORIZED_CONNECTIONS");break;default:r.dispatch(Se(100)),n("disconnected",o.payload)}return;case"incoming_chat":return st(n,o.payload.chat.users),void n(o.action,o.payload);case"incoming_event":if(null===o.payload.event)return;return void n(o.action,o.payload);case"incoming_typing_indicator":return void n(o.action,o.payload);case"incoming_multicast":return function(e,t){var n=t.type,r=t.content;if("lc2"===n&&("groups_update"===r.name&&"groups"in r&&!f(r.groups))){var o=r.groups[0];e("availability_updated",{availability:"offline"===o.status?"offline":"online"})}}(n,o.payload),void n(o.action,o.payload);case"user_added_to_chat":return st(n,[o.payload.user]),void n(o.action,o.payload);default:return void n(o.action,o.payload)}},ut=function(e,t){var n=e.emit,r=t.payload;switch(r.action){case"chat_deactivated":return void r.resolve(De);case"get_chat":return st(n,r.payload.users),void r.resolve(r.payload);case"incoming_chat":return st(n,r.payload.chat.users),void r.resolve(r.payload);case"incoming_event":return void r.resolve(r.payload.event);case"list_chats":return st(n,r.payload.users),void r.resolve(r.payload);default:return void r.resolve(r.payload)}},lt=function(e){var t=e.auth,n=e.customerDataProvider,r=e.emitter,o=e.socket,i=r.emit,a=Me(t,n);return function(e,n){switch(e.type){case"change_region":return void o.reinitialize();case"check_goals":return void function(e,t,n){return t.getToken().then((function(t){var r=e.getState();null===ue(r)&&e.dispatch(ke(t.entityId));var o=r.page;if(o&&o.url){var i=X({license_id:r.licenseId}),a={customer_fields:n||{},session_fields:Ie(n||{}),group_id:r.groupId||0,page_url:o.url};return U()(fe(r)+"/action/check_goals?"+i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.tokenType+" "+t.accessToken},body:JSON.stringify(a)}).then((function(){}))}}))}(n,t,e.payload.sessionFields).catch(h);case"destroy":var s=e.payload;return o.destroy(),"manual"!==s.reason&&i("disconnected",s),void r.off();case"fail_all_requests":var c=e.payload,u=c.reason,l=c.rejects,d={message:it[u],code:u};return void l.forEach((function(e){e(_e(d))}));case"login_success":var p=e.payload,f=p.dynamicConfig,v=p.customer,m=p.chats,y=p.greeting,_=oe({customer:v,availability:p.availability},y&&{greeting:y});return Object.defineProperty(_,"__unsafeDynamicConfig",{value:f}),Object.defineProperty(_,"__unsafeChats",{value:m}),void i("connected",_);case"pause_connection":return void o.disconnect();case"prefetch_token":return e.payload.fresh?void t.getFreshToken().catch(h):void t.hasToken().then((function(e){return e?t.getToken().then((function(e){if(!(e.creationDate+e.expiresIn-Date.now()>36e5))return t.invalidate().then(t.getFreshToken)})):t.getToken()})).catch(h);case"push_received":return"customer_disconnected"===e.payload.action||at(n,e),void ct({emit:i,store:n},e);case"push_response_received":return at(n,e),void ut({emit:i},e);case"reconnect":return void o.reconnect(e.payload.delay);case"request_failed":var g=e.payload;return void(0,g.reject)(_e(g.error));case"response_received":return at(n,e),void ut({emit:i},e);case"send_request":var b=n.getState();return function(e){return"destroyed"===se(e)}(b)?void Re(n,e,{code:"SDK_DESTROYED",message:"SDK destroyed."}):de(b)||"login"===e.payload.source?void function(e,t){var n=t.payload,r=oe({request_id:n.id},n.request);e.emit(r)}(o,e):void Re(n,e,{code:"NO_CONNECTION",message:"No connection."});case"set_self_id":return void i("customer_id",e.payload.id);case"socket_disconnected":return void i("disconnected",{reason:"connection_lost"});case"socket_connected":return void a(n);case"socket_recovered":if(!de(n.getState()))return;return void i("connection_recovered");case"socket_unstable":if(!de(n.getState()))return;return void i("connection_unstable");case"start_connection":return o.connect(),void n.dispatch(Te());case"update_customer_page":if(!de(n.getState()))return;return void Ce(n,Oe("update_customer_page",e.payload)).catch(h);default:return}}},dt=function(e,t){var n=e.getState(),r=fe(n)+"/rtm/sjs";return Q(r,{query:{license_id:n.licenseId},emitter:t})},pt=function(e){return{chatId:e.chat_id,properties:e.properties}},ft=function(e){var t={chatId:e.chat_id,threadId:e.thread_id,transferredTo:oe({},e.transferred_to.agent_ids&&{agentIds:e.transferred_to.agent_ids},e.transferred_to.group_ids&&{groupIds:e.transferred_to.group_ids}),queue:e.queue?rt(e.queue):null};return"manual"===e.reason?oe({},t,{reason:e.reason,requesterId:e.requester_id}):oe({},t,{reason:e.reason})},ht=function(e){return{url:e.url,title:e.title,timestamp:1e3*e.timestamp}},vt=function(e){return{customer:oe({id:e.customer.id},$e(e.customer))}},mt=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},yt=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},_t=function(e){var t=e.thread_id;return{chatId:e.chat_id,threadId:t,event:ze(t,e.event)}},gt=function(e){return{chatId:e.chat_id,userId:e.user_id,seenUpTo:e.seen_up_to}},bt=function(e){return{uniqueId:e.unique_id}},wt=function(e){return{chat:Ve(e.chat)}},It=function(e){return{chatId:e.chat_id,event:ze(e.thread_id,e.event)}},Et=function(e){return Ye(e)},xt=function(e){return{userId:e.user_id,chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,postback:e.postback}},Tt=function(e){var t=e.chat_id,n=e.typing_indicator;return{chatId:t,typingIndicator:{authorId:n.author_id,isTyping:n.is_typing}}},St=function(e){return{chatId:e.chat_id,threadId:e.thread_id,queue:nt(e.queue)}},Ot=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},jt=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},kt=function(e){return{chatId:e.chat_id,user:ot(e.user),present:e.user.present}},Ct=function(e){return{chatId:e.chat_id,userId:e.user_id}},Nt=function(e){return e.map((function(e){switch(e.type){case"group_chooser":return oe({},e,{options:e.options.map((function(e){var t=e.group_id;return oe({},ie(e,["group_id"]),{groupId:t})}))});case"rating":var t=e.comment_label;return oe({},ie(e,["comment_label"]),{commentLabel:t});default:return e}}))},Pt=function(e){return e.enabled?oe({},e,{form:"id"in e.form.fields[0]?{id:e.form.id,fields:Nt(e.form.fields)}:{id:"ticket",fields:(t=e.form.fields,n=t.map((function(e,t){return oe({},e,{id:String(t)})})),Nt(n))}}):e;var t,n},At=function(e){var t={url:e.url};return e.title&&(t.title=e.title),e.description&&(t.description=e.description),e.image_url&&(t.imageUrl="https://"+e.image_url,e.image_width&&e.image_height&&(t.imageWidth=e.image_width,t.imageHeight=e.image_height)),t},Mt=function(e){var t=e.online_groups_ids,n=e.customer_groups;if(!t)return"offline";var r,o=n.monitoring.id;return r=o,-1!==t.indexOf(r)?"online":"offline"},qt=function(e){var t=e.chats_summary.map((function(e){var t=e.id,n=e.active,r=e.access,o=e.last_thread_created_at,i=e.last_thread_id,a=e.last_event_per_type,s=e.properties,u=void 0===s?{}:s,l=e.users,d={id:t,active:n,access:Ze(r),properties:u,users:l.map(ot),lastThreadId:i||null,lastThreadCreatedAt:o||null,eventsSeenUpToMap:Qe(l)};if(!a)return d;d.lastEventsPerType=c((function(e){return ze(e.thread_id,e.event)}),a);var p,f=a,h=Object.keys(f).map((function(e){return f[e]})),v=(p=h.sort((function(e,t){return e.thread_id===t.thread_id?g(e.event.created_at,t.event.created_at):g(e.thread_created_at,t.thread_created_at)}))).length>0?p[p.length-1]:null;return v&&(d.lastEvent=d.lastEventsPerType[v.event.type]),d}));return{chatsSummary:v((function(e){var t=e.lastEvent,n=e.order;return-1*(void 0!==t?t.timestamp:n)}),t),totalChats:e.total_chats,users:b((function(e){return e.id}),i((function(e){return e.users}),t)),previousPageId:e.previous_page_id||null,nextPageId:e.next_page_id||null}},Lt=function(e){return e.groups_status},Rt=function(e,t){return{threads:t.threads.map((function(t){return Ke(e.payload.chat_id,t)})),previousPageId:t.previous_page_id||null,nextPageId:t.next_page_id||null}},Dt=function(e){var t=e.__priv_dynamic_config,n=e.chats,r=e.greeting||t.greeting;return oe({dynamicConfig:t,customer:tt(e.customer),availability:Mt(t),chats:n.map((function(t){return{id:t.chat_id,active:"has_active_thread"in t?t.has_active_thread:e.has_active_thread,hasUnreadEvents:t.has_unread_events}}))},r&&{greeting:Ye(r)})},Ut=function(e){switch(e.action){case"chat_deactivated":return{action:e.action,payload:{chatId:e.payload.chat_id}};case"chat_properties_deleted":return{action:e.action,payload:(t=e.payload,{chatId:t.chat_id,properties:t.properties})};case"chat_properties_updated":return{action:e.action,payload:pt(e.payload)};case"chat_transferred":return{action:e.action,payload:ft(e.payload)};case"customer_side_storage_updated":case"customer_disconnected":return{action:e.action,payload:e.payload};case"customer_page_updated":return{action:e.action,payload:ht(e.payload)};case"customer_updated":return{action:e.action,payload:vt(e.payload)};case"event_properties_deleted":return{action:e.action,payload:mt(e.payload)};case"event_properties_updated":return{action:e.action,payload:yt(e.payload)};case"event_updated":return{action:e.action,payload:_t(e.payload)};case"events_marked_as_seen":return{action:e.action,payload:gt(e.payload)};case"greeting_accepted":case"greeting_canceled":return{action:e.action,payload:bt(e.payload)};case"incoming_chat":return{action:e.action,payload:wt(e.payload)};case"incoming_event":return{action:e.action,payload:It(e.payload)};case"incoming_greeting":return{action:e.action,payload:Et(e.payload)};case"incoming_multicast":return{action:e.action,payload:e.payload};case"incoming_rich_message_postback":return{action:e.action,payload:xt(e.payload)};case"incoming_typing_indicator":return{action:e.action,payload:Tt(e.payload)};case"queue_position_updated":return{action:e.action,payload:St(e.payload)};case"thread_properties_deleted":return{action:e.action,payload:Ot(e.payload)};case"thread_properties_updated":return{action:e.action,payload:jt(e.payload)};case"user_added_to_chat":return{action:e.action,payload:kt(e.payload)};case"user_removed_from_chat":return{action:e.action,payload:Ct(e.payload)};case"chat_user_added":return{action:"user_added_to_chat",payload:kt(e.payload)};case"chat_user_removed":return{action:"user_removed_from_chat",payload:Ct(e.payload)}}var t},Xt=function(e,t){var n=e.dispatch,r=e.getState,o=t.request_id,i=ce(r(),o);n({type:"response_received",payload:oe({id:o,promise:i.promise,resolve:i.resolve},function(e){var t,n,r=e.request,o=e.response;switch(o.action){case"accept_greeting":case"cancel_greeting":case"delete_chat_properties":case"delete_event_properties":case"delete_thread_properties":return{action:o.action,payload:De};case"get_chat":return{action:o.action,payload:(n=o.payload,Ve(n))};case"get_customer":return{action:o.action,payload:tt(o.payload)};case"get_form":return{action:o.action,payload:Pt(o.payload)};case"get_predicted_agent":return{action:o.action,payload:(t=o.payload,{id:t.id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,isBot:t.is_bot})};case"get_url_info":return{action:o.action,payload:At(o.payload)};case"list_chats":return{action:o.action,payload:qt(o.payload)};case"list_group_statuses":return{action:o.action,payload:Lt(o.payload)};case"list_threads":return{action:o.action,payload:Rt(r,o.payload)};case"login":return{action:o.action,payload:Dt(o.payload)};case"mark_events_as_seen":case"send_sneak_peek":case"set_customer_session_fields":case"send_rich_message_postback":case"update_chat_properties":case"update_customer":case"update_customer_page":case"update_event_properties":case"update_thread_properties":return{action:o.action,payload:De}}}({request:i.request,response:t}))})},Wt=function(e,t){var n=e.dispatch;return t.on("connect",(function(){n({type:"socket_connected"})})),t.on("message",(function(t){if("response"===t.type){if(!t.success)return void function(e,t){var n,r=e.dispatch,o=e.getState,i=t.request_id,a=t.payload;r({type:"request_failed",payload:{id:i,reject:ce(o(),i).reject,error:(n=a.error,{code:n.type.toUpperCase(),message:n.message})}})}(e,t);switch(t.action){case"activate_chat":case"deactivate_chat":case"send_event":case"start_chat":return;default:return void Xt(e,t)}}if("request_id"in t)switch(t.action){case"chat_deactivated":case"incoming_chat":case"incoming_event":return void function(e,t){var n=e.dispatch,r=e.getState,o=t.request_id,i=ce(r(),o);n({type:"push_response_received",payload:oe({id:o,promise:i.promise,resolve:i.resolve},Ut(t))})}(e,t)}!function(e,t){var n=Ut(t);n&&e.dispatch({type:"push_received",payload:n})}(e,t)})),t.on("disconnect",(function(){Le(e,"CONNECTION_LOST"),"connected"===se(e.getState())&&e.dispatch({type:"socket_disconnected"})})),t.on("connection_unstable",(function(){n({type:"socket_unstable"})})),t.on("connection_recovered",(function(){n({type:"socket_recovered"})})),t.off},Ft=function(e,t){return e.length?e+"\n"+t:t},Jt=function(e,t,n){var r=n.filledForm,o=n.groupId,i=n.timeZone;return t.getToken().then((function(t){var n=e.getState();null===ue(n)&&e.dispatch(ke(t.entityId));var a=pe(n)+"/v2/tickets/new",s=function(e,t){var n=t.fields,r=t.customerId,o=t.groupId,i=void 0===o?e.groupId:o,a=t.timeZone,s=oe({licence_id:e.licenseId,ticket_message:"",offline_message:"",visitor_id:r,requester:{}},"number"==typeof i&&{group:i},e.page&&{source:{url:e.page.url}},a&&{timezone:a});return n.reduce((function(e,t){switch(t.type){case"subject":var n=t.answer,r=n?t.label+" "+n:t.label;return n&&(e.subject=n),e.offline_message=Ft(e.offline_message,r),e;case"name":var o=t.answer,i=o?t.label+" "+o:t.label;return o&&(e.requester.name=o),e.offline_message=Ft(e.offline_message,i),e;case"email":var a=t.answer,s=a?t.label+" "+a:t.label;return e.requester.mail=a,e.offline_message=Ft(e.offline_message,s),e;case"question":case"textarea":var c=t.answer,u=c?t.label+" "+c:t.label;return e.offline_message=Ft(e.offline_message,u),e.ticket_message=Ft(e.ticket_message,u),e;case"radio":case"select":var l=t.answer&&t.answer.label,d=l?t.label+" "+l:t.label;return e.offline_message=Ft(e.offline_message,d),e.ticket_message=Ft(e.ticket_message,d),e;case"checkbox":var p=t.answers&&t.answers.map((function(e){return e.label})).join(", "),f=p?t.label+" "+p:t.label;return e.offline_message=Ft(e.offline_message,f),e.ticket_message=Ft(e.ticket_message,f),e;default:return e}}),s)}(n,{fields:r.fields,customerId:t.entityId,groupId:o,timeZone:i});return U()(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){if(e.ok)return e.json().then((function(e){return oe({},e,{text:s.ticket_message})}));if(400===e.status||422===e.status){var t=function(e){if(!e||!e.errors)throw new Error;var t=e.errors[0];if("incorrect requester structure"===Object.keys(t)[0])throw _e({message:t["incorrect requester structure"][0],code:"VALIDATION"});throw new Error};return e.json().then(t,t)}throw new Error}))}))},Ht=function(e,t){if(void 0===t&&(t=2),e<1024)return e+" b";var n=e/1024;if(e<1048576)return n.toFixed(t)+" kb";var r=n/1024;return e<1073741824?r.toFixed(t)+" MB":(r/1024).toFixed(t)+" GB"},Gt=function(e,t){var n,r=e.auth,o=e.store,i=t.file,a=t.onProgress,s=!1;return{promise:new Promise((function(e,t){!function(e){if(e.size>10485760)throw _e({message:"The file is too big (max size is "+Ht(10485760)+").",code:"TOO_BIG_FILE"})}(i);var c=o.getState(),u=X({license_id:c.licenseId}),l=fe(c)+"/action/upload_file?"+u,d={file:i};r.getToken().then((function(r){s?t(new Error("Upload cancelled.")):(n=K(l,d,{headers:{Authorization:r.tokenType+" "+r.accessToken},onProgress:a})).promise.then(e,(function(e){if(e.response){var n=e.response.error,r=n.type,o=n.message;t(_e({message:o,code:r.toUpperCase()}))}else t(e)}))}))})),cancel:function(){s||(s=!0,n&&n.cancel())}}},Bt=function(e){var t=e.env,n=e.licenseId,r=e.eventName;if("production"!==t)return Promise.resolve();var o={event_name:r,severity:"Informational",sdkVersion:"2.0.4"},i={licence_id:n,event_id:"chat_widget_customer_sdk",message:JSON.stringify(o)};return function(e,t){return new Promise((function(n){var r=new Image;r.src=e+"?"+t,r.onerror=h,r.onload=function(){return n()}}))}("https://queue.livechatinc.com/logs",X(i))},zt={},Yt=function(e,t){void 0===t&&(t="");var n=Object.keys(e);return n.map((function(n){var r=e[n];return function(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(e=console).info.apply(e,[t+"."+n+"() ===>"].concat(i));var s=r.apply(void 0,i);return s&&"function"==typeof s.then&&s.then((function(e){console.info(t+"."+n+"() <===",e)})).catch((function(e){console.error(t+"."+n+"() <===",e)})),s}})).reduce((function(e,t,r){return e[n[r]]=t,e}),{})},Zt=function(e,t,n){if(void 0===n.LISTENER_IDENTITY&&Object.defineProperty(n,"LISTENER_IDENTITY",{value:{}}),n.LISTENER_IDENTITY[t]){var r=n.LISTENER_IDENTITY[t];return zt[r]}var o=function(r){console.info("."+e+'("'+t+'") <===',r),n(r)},i=d(zt);return n.LISTENER_IDENTITY[t]=i,zt[i]=o,o},Qt=function(e){var t=e;console.warn("You probably do not want to use debug(customerSDK) in your production environment.");var n=t.on,r=t.once,o=t.off,i=t.getChatHistory,a=t.auth,s=ie(t,["on","once","off","getChatHistory","auth"]),c=Yt(s);return Object.freeze(oe({auth:Object.freeze(Yt(a,".auth"))},c,{getChatHistory:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).info.apply(e,[".getChatHistory()"].concat(n));var o=i.apply(void 0,n),a="history.next()";return{next:function(){var e;(e=console).info.apply(e,[a+" ===>"].concat(n));var t=o.next();return t.then((function(e){var t;(t=console).info.apply(t,[a+" <==="].concat(n,[e]))})).catch((function(e){var t;(t=console).error.apply(t,[a+" <==="].concat(n,[e]))})),t}}},off:function(e,t){console.info('.off("'+e+'", '+(t.name||"anonymous")+")");var n=t;if(void 0!==t.LISTENER_IDENTITY){var r=t.LISTENER_IDENTITY[e];n=zt[r]}o(e,n)},on:function(e,t){n(e,Zt("on",e,t))},once:function(e,t){r(e,Zt("once",e,t))}}))},Kt=function(e,t){void 0===t&&(t="production"),ne(e);var n=e.autoConnect,r=void 0===n||n,o=e.customerDataProvider,i=ie(e,["autoConnect","customerDataProvider"]),a=ye(oe({},i,{env:t})),s=z(),c=function(e){var t=z(),n=dt(e,t);return oe({},Object.keys(n).reduce((function(e,t){return e[t]=function(){var e;return(e=n)[t].apply(e,arguments)},e}),{}),{reinitialize:function(){n.disconnect(),(n=dt(e,t)).connect()}})}(a),u=re(i,t);a.addSideEffectsHandler(lt({emitter:s,socket:c,auth:u,customerDataProvider:o})),Wt(a,c);var l=Ce.bind(null,a),d=function(){a.dispatch({type:"start_connection"})},p=Object.freeze({acceptGreeting:function(e){var t=e.greetingId,n=e.uniqueId;return l(Oe("accept_greeting",{greeting_id:t,unique_id:n}))},activateChat:function(n){return Bt({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Oe("activate_chat",function(e){var t=we(e);return oe({},t,{chat:oe({},t.chat,{id:e.chat.id})})}(n)))},auth:u,cancelGreeting:function(e){var t=e.uniqueId;return l(Oe("cancel_greeting",{unique_id:t}))},cancelRate:function(e){var t=e.chatId,n=e.properties,r=void 0===n?["score"]:n;return p.listThreads({chatId:t}).then((function(e){var n=e.threads;if(!n.length)throw _e({message:'There is no thread in "'+t+'".',code:"MISSING_CHAT_THREAD"});return p.deleteThreadProperties({chatId:t,threadId:n[0].id,properties:{rating:r}})}))},connect:d,deactivateChat:function(e){var t=e.chatId;return l(Oe("deactivate_chat",{chat_id:t}))},deleteChatProperties:function(e){var t=e.chatId,n=e.properties;return l(Oe("delete_chat_properties",{chat_id:t,properties:n}))},deleteEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.properties;return l(Oe("delete_event_properties",{chat_id:t,thread_id:n,event_id:r,properties:o}))},deleteThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Oe("delete_thread_properties",{chat_id:t,thread_id:n,properties:r}))},destroy:function(){a.dispatch(xe("manual"))},disconnect:function(){a.dispatch({type:"pause_connection"})},getChat:function(e){var t=e.chatId,n=e.threadId;return l(Oe("get_chat",{chat_id:t,thread_id:n}))},getChatHistory:function(e){var t=e.chatId;return function(e,t){var n={status:"idle",queuedTasks:[],nextPageId:null},r=function r(o,i){switch(n.status){case"idle":return n.status="fetching",void e.listThreads({chatId:t,minEventsCount:25,pageId:n.nextPageId||void 0}).then((function(e){var t=e.threads,i=e.nextPageId;n.nextPageId=i,n.nextPageId?(n.status="idle",o({value:{threads:[].concat(t).reverse()},done:!1})):(n.status="done",o({value:{threads:[].concat(t).reverse()},done:!0}));var a=n.queuedTasks.shift();a&&r(a.resolve,a.reject)}),(function(e){var t=n.queuedTasks;n.status="idle",n.queuedTasks=[],i(e),t.forEach((function(t){return t.reject(e)}))}));case"fetching":return void n.queuedTasks.push({resolve:o,reject:i});case"done":return void o({value:void 0,done:!0})}};return{next:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return new Promise(r)}))}}(p,t)},getCustomer:function(){return l(Oe("get_customer",{}))},getForm:function(e){var t=e.groupId,n=e.type;return l(Oe("get_form",{group_id:t,type:n}))},getPredictedAgent:function(e){void 0===e&&(e={});var t=e.groupId;return l(Oe("get_predicted_agent","number"==typeof t?{group_id:t}:{}))},getUrlInfo:function(e){var t=e.url;return l(Oe("get_url_info",{url:t}))},listChats:function(e){var t=void 0===e?{}:e,n=t.limit,r=void 0===n?10:n,o=t.pageId;return r>25?Promise.reject(new Error("Specified limit is too high (max 25).")):l(Oe("list_chats",{limit:r,page_id:o}))},listGroupStatuses:function(e){var t=(void 0===e?{}:e).groupIds;return l(Oe("list_group_statuses",t?{group_ids:t}:{all:!0}))},listThreads:function(e){var t=e.chatId,n=e.sortOrder,r=void 0===n?"desc":n,o=e.limit,i=e.pageId,a=e.minEventsCount;return l(Oe("list_threads",{chat_id:t,sort_order:r,limit:o,page_id:i,min_events_count:a}))},markEventsAsSeen:function(e){var t=e.chatId,n=e.seenUpTo;return l(Oe("mark_events_as_seen",{chat_id:t,seen_up_to:n}))},on:s.on,once:s.once,off:s.off,rateChat:function(e){var t=e.chatId,n=e.rating;return p.listThreads({chatId:t}).then((function(e){var r=e.threads;if(!r.length)throw _e({message:'There is no thread in "'+t+'".',code:"MISSING_CHAT_THREAD"});return p.updateThreadProperties({chatId:t,threadId:r[0].id,properties:{rating:n}})}))},sendEvent:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l((n=(t=e).chatId,r=t.event,o=t.attachToLastThread,i={chat_id:n,event:be(r)},o&&(i.attach_to_last_thread=!0),Oe("send_event",i)));var t,n,r,o,i})),sendTicketForm:function(e){return Jt(a,u,e)},sendRichMessagePostback:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.postback;return l(Oe("send_rich_message_postback",{chat_id:t,event_id:r,thread_id:n,postback:o}))},setCustomerSessionFields:function(e){var t=e.sessionFields;return l(Oe("set_customer_session_fields",{session_fields:Ie(t)}))},setSneakPeek:function(e){var t=e.chatId,n=e.sneakPeekText,r=a.getState();le(r,t)&&de(r)&&l(Oe("send_sneak_peek",{chat_id:t,sneak_peek_text:n})).catch(h)},startChat:function(n){return void 0===n&&(n={}),Bt({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Oe("start_chat",we(n)))},updateChatProperties:function(e){var t=e.chatId,n=e.properties;return l(Oe("update_chat_properties",{chat_id:t,properties:n}))},updateCustomer:function(e){return l(Oe("update_customer",Ee(e)))},updateCustomerPage:function(e){a.dispatch({type:"update_customer_page",payload:y(["title","url"],e)})},updateEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,o=e.properties;return l(Oe("update_event_properties",{chat_id:t,event_id:r,thread_id:n,properties:o}))},updateThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Oe("update_thread_properties",{chat_id:t,thread_id:n,properties:r}))},uploadFile:function(e){return Gt({auth:u,store:a},e)}});return r?d():a.dispatch({type:"check_goals",payload:{sessionFields:"function"==typeof o?o().sessionFields:{}}}),p}},"4BPL":function(e,t,n){"use strict";var r=n("P7XM"),o=n("41W/").EventEmitter;function i(e,t){o.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(i,o),i.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},i.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=i},"4aWg":function(e,t,n){"use strict";(function(t){n("6OGu");var r,o=n("GBY4"),i=n("P7XM"),a=n("kwwM"),s=n("wK5r"),c=n("Ta15"),u=n("dq/4"),l=n("+ICs"),d=n("h4wu"),p=n("XoJ6"),f=n("I3Mb"),h=n("Kygq"),v=n("P21X"),m=n("uAge"),y=n("jBAH"),_=n("V/Dq"),g=n("qZAh"),b=n("JHGA");function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var i=new o(e);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==i.protocol&&"https:"!==i.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var a="https:"===i.protocol;if("https:"===y.protocol&&!a&&!u.isLoopbackAddr(i.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var l=u.getOrigin(y.href);this._origin=l?l.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,this.url,this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:u.isOriginEqual(this.url,y.href),sameScheme:u.isSchemeEqual(this.url,y.href)},this._ir=new b(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function I(e){return 1e3===e||e>=3e3&&e<=4999}i(w,m),w.prototype.close=function(e,t){if(e&&!I(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(c.quote(e))},w.version=n("N1+o"),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var n=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n);var r=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName],i=new e(r,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),o=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new v("heartbeat")),void this.transport}if(o)try{t=a.parse(o)}catch(i){}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach((function(e){n.transport,n.dispatchEvent(new g(e))}));break;case"m":this.transport,this.dispatchEvent(new g(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},w.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),I(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open")),this.transport):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new v("error"));var o=new _("close");o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=d(e),n("eCLP")(w,e),w}}).call(this,n("yLpj"))},"6FIn":function(e,t,n){"use strict";(function(t){var r=n("P7XM"),o=n("MaM3"),i=n("nV5M"),a=n("Bcy+");function s(e){if(!s.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/jsonp",a,i)}r(s,o),s.enabled=function(){return!!t.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s}).call(this,n("yLpj"))},"6OGu":function(e,t,n){"use strict";var r,o=Array.prototype,i=Object.prototype,a=Function.prototype,s=String.prototype,c=o.slice,u=i.toString,l=function(e){return"[object Function]"===i.toString.call(e)},d=function(e){return"[object String]"===u.call(e)},p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();r=p?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var f=function(e,t,n){for(var o in t)i.hasOwnProperty.call(t,o)&&r(e,o,t[o],n)},h=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function v(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function m(){}f(a,{bind:function(e){var t=this;if(!l(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=c.call(arguments,1),r=function(){if(this instanceof s){var r=t.apply(this,n.concat(c.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(c.call(arguments)))},o=Math.max(0,t.length-n.length),i=[],a=0;a<o;a++)i.push("$"+a);var s=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(m.prototype=t.prototype,s.prototype=new m,m.prototype=null),s}}),f(Array,{isArray:function(e){return"[object Array]"===u.call(e)}});var y,_,g,b=Object("a"),w="a"!==b[0]||!(0 in b);f(o,{forEach:function(e){var t=h(this),n=w&&d(this)?this.split(""):t,r=arguments[1],o=-1,i=n.length>>>0;if(!l(e))throw new TypeError;for(;++o<i;)o in n&&e.call(r,n[o],o,t)}},(y=o.forEach,_=!0,g=!0,y&&(y.call("foo",(function(e,t,n){"object"!=typeof n&&(_=!1)})),y.call([1],(function(){g="string"==typeof this}),"x")),!(y&&_&&g)));var I=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);f(o,{indexOf:function(e){var t=w&&d(this)?this.split(""):h(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=v(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},I);var E,x=s.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(E=void 0===/()??/.exec("")[1],s.split=function(e,t){var n=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==u.call(e))return x.call(this,e,t);var r,i,a,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,l+"g"),n+="",E||(r=new RegExp("^"+e.source+"$(?!\\s)",l)),t=void 0===t?-1>>>0:t>>>0;(i=e.exec(n))&&!((a=i.index+i[0].length)>d&&(c.push(n.slice(d,i.index)),!E&&i.length>1&&i[0].replace(r,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)})),i.length>1&&i.index<n.length&&o.push.apply(c,i.slice(1)),s=i[0].length,d=a,c.length>=t));)e.lastIndex===i.index&&e.lastIndex++;return d===n.length?!s&&e.test("")||c.push(""):c.push(n.slice(d)),c.length>t?c.slice(0,t):c}):"0".split(void 0,0).length&&(s.split=function(e,t){return void 0===e&&0===t?[]:x.call(this,e,t)});var T=s.substr,S="".substr&&"b"!=="0b".substr(-1);f(s,{substr:function(e,t){return T.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},S)},"7dLu":function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(this,n("yLpj"))},"7ueG":function(e,t,n){"use strict";var r=n("I+eb"),o=n("WKiH").start,i=n("yNLB")("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},BYAM:function(e,t){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],r=n.join(","),o="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function i(e,t){t=t||{};var n,i,s,c=[],d=[],p=e.querySelectorAll(r);for(t.includeContainer&&o.call(e,r)&&(p=Array.prototype.slice.apply(p)).unshift(e),n=0;n<p.length;n++)a(i=p[n])&&(0===(s=u(i))?c.push(i):d.push({documentOrder:n,tabIndex:s,node:i}));return d.sort(l).map((function(e){return e.node})).concat(c)}function a(e){return!(!s(e)||function(e){return function(e){return d(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||u(e)<0)}function s(e){return!(e.disabled||function(e){return d(e)&&"hidden"===e.type}(e)||function(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}(e))}i.isTabbable=function(e){if(!e)throw new Error("No node provided");return!1!==o.call(e,r)&&a(e)},i.isFocusable=function(e){if(!e)throw new Error("No node provided");return!1!==o.call(e,c)&&s(e)};var c=n.concat("iframe").join(",");function u(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function l(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function d(e){return"INPUT"===e.tagName}e.exports=i},"Bcy+":function(e,t,n){"use strict";(function(t){var r,o,i=n("wK5r"),a=n("dq/4");e.exports=function(e,n,s){r||((r=t.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(o=t.document.createElement("textarea")).name="d",r.appendChild(o),t.document.body.appendChild(r));var c="a"+i.string(8);r.target=c,r.action=a.addQuery(a.addPath(e,"/jsonp_send"),"i="+c);var u=function(e){try{return t.document.createElement('<iframe name="'+e+'">')}catch(r){var n=t.document.createElement("iframe");return n.name=e,n}}(c);u.id=c,u.style.display="none",r.appendChild(u);try{o.value=n}catch(d){}r.submit();var l=function(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){u.parentNode.removeChild(u),u=null}),500),o.value="",s(e))};return u.onerror=function(){l()},u.onload=function(){l()},u.onreadystatechange=function(e){u.readyState,"complete"===u.readyState&&l()},function(){l(new Error("Aborted"))}}}).call(this,n("yLpj"))},C2QD:function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},ERqb:function(e,t,n){"use strict";(function(t){var r=n("41W/").EventEmitter,o=n("P7XM"),i=n("+ICs"),a=n("I3Mb"),s=n("dq/4");function c(e,t,n){var o=this;r.call(this),setTimeout((function(){o._start(e,t,n)}),0)}o(c,r),c.prototype._start=function(e,n,r){var o=this,a=new t.XDomainRequest;n=s.addQuery(n,"t="+ +new Date),a.onerror=function(){o._error()},a.ontimeout=function(){o._error()},a.onprogress=function(){a.responseText,o.emit("chunk",200,a.responseText)},a.onload=function(){o.emit("finish",200,a.responseText),o._cleanup(!1)},this.xdr=a,this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(c){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!t.XDomainRequest||!a.hasDomain()),e.exports=c}).call(this,n("yLpj"))},"Eyz+":function(e,t,n){"use strict";e.exports=[n("ZGRn"),n("2fH1"),n("hNov"),n("tziy"),n("HPCE")(n("tziy")),n("nsiM"),n("HPCE")(n("nsiM")),n("SQnR"),n("JaSG"),n("HPCE")(n("SQnR")),n("6FIn")]},"FMj+":function(e,t,n){"use strict";(function(t){var r=n("41W/").EventEmitter,o=n("P7XM"),i=n("+ICs"),a=n("dq/4"),s=t.XMLHttpRequest;function c(e,t,n,o){var i=this;r.call(this),setTimeout((function(){i._start(e,t,n,o)}),0)}o(c,r),c.prototype._start=function(e,t,n,r){var o=this;try{this.xhr=new s}catch(l){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=a.addQuery(t,"t="+ +new Date),this.unloadRef=i.unloadAdd((function(){o._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(d){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var u in r.headers)this.xhr.setRequestHeader(u,r.headers[u]);this.xhr.onreadystatechange=function(){if(o.xhr){var e,t,n=o.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(d){}1223===t&&(t=204),200===t&&e&&e.length>0&&o.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,o.emit("finish",t,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(d){o.emit("finish",0,""),o._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!s;var u=["Active"].concat("Object").join("X");!c.enabled&&u in t&&(s=function(){try{return new t[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new s);var l=!1;try{l="withCredentials"in new s}catch(d){}c.supportsCORS=l,e.exports=c}).call(this,n("yLpj"))},"G/ey":function(e,t,n){"use strict";var r=n("P7XM"),o=n("41W/").EventEmitter,i=n("kwwM"),a=n("ZS6Q"),s=n("+iVA");function c(e){var t=this;o.call(this),this.ir=new s(e,a),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",i.stringify([e,n]))}))}r(c,o),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=c},GBY4:function(e,t,n){"use strict";(function(t){n("7ueG");var r=n("RA0T"),o=n("nFlj"),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(s,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function d(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||r);if("blob:"===e.protocol)o=new f(unescape(e.pathname),{});else if("string"===a)for(n in o=new f(e,{}),l)delete o[n];else if("object"===a){for(n in e)n in l||(o[n]=e[n]);void 0===o.slashes&&(o.slashes=i.test(e.href))}return o}function p(e){e=c(e);var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function f(e,t,n){if(e=c(e),!(this instanceof f))return new f(e,t,n);var i,a,s,l,h,v,m=u.slice(),y=typeof t,_=this,g=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=d(t),i=!(a=p(e||"")).protocol&&!a.slashes,_.slashes=a.slashes||i&&t.slashes,_.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(m[3]=[/(.*)/,"pathname"]);g<m.length;g++)"function"!=typeof(l=m[g])?(s=l[0],v=l[1],s!=s?_[v]=e:"string"==typeof s?~(h=e.indexOf(s))&&("number"==typeof l[2]?(_[v]=e.slice(0,h),e=e.slice(h+l[2])):(_[v]=e.slice(h),e=e.slice(0,h))):(h=s.exec(e))&&(_[v]=h[1],e=e.slice(0,h.index)),_[v]=_[v]||i&&l[3]&&t[v]||"",l[4]&&(_[v]=_[v].toLowerCase())):e=l(e);n&&(_.query=n(_.query)),i&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(_.pathname,t.pathname)),r(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(l=_.auth.split(":"),_.username=l[0]||"",_.password=l[1]||""),_.origin=_.protocol&&_.host&&"file:"!==_.protocol?_.protocol+"//"+_.host:"null",_.href=_.toString()}f.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";i[e]=t.charAt(0)!==a?a+t:t}else i[e]=t;break;default:i[e]=t}for(var s=0;s<u.length;s++){var c=u[s];c[4]&&(i[c[1]]=i[c[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},f.extractProtocol=p,f.location=d,f.trimLeft=c,f.qs=o,e.exports=f}).call(this,n("yLpj"))},HPCE:function(e,t,n){"use strict";(function(t){var r=n("P7XM"),o=n("XLbk"),i=n("XoJ6");e.exports=function(e){function n(t,n){o.call(this,e.transportName,t,n)}return r(n,o),n.enabled=function(n,r){if(!t.document)return!1;var a=i.extend({},r);return a.sameOrigin=!0,e.enabled(a)&&o.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=o.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(this,n("yLpj"))},I3Mb:function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,n("yLpj"))},JHGA:function(e,t,n){"use strict";var r=n("41W/").EventEmitter,o=n("P7XM"),i=n("dq/4"),a=n("ERqb"),s=n("aumc"),c=n("ZS6Q"),u=n("LBZQ"),l=n("O8AR"),d=n("+iVA");function p(e,t){var n=this;r.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}o(p,r),p._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,c):s.enabled?new d(t,s):a.enabled&&n.sameScheme?new d(t,a):l.enabled()?new l(e,t):new d(t,u)},p.prototype.doXhr=function(e,t){var n=this,r=i.addPath(e,"/info");this.xo=p._getReceiver(e,r,t),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),p.timeout),this.xo.once("finish",(function(e,t){n._cleanup(!0),n.emit("finish",e,t)}))},p.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,e.exports=p},JaA5:function(e,t,n){"use strict";(function(t){e.exports=t.fetch}).call(this,n("yLpj"))},JaSG:function(e,t,n){"use strict";var r=n("P7XM"),o=n("WsSN"),i=n("hNov"),a=n("aXJd"),s=n("ERqb");function c(e){if(!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",a,s)}r(c,o),c.enabled=i.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},Kygq:function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach((function(e){var r;try{r=t.console&&t.console[e]&&t.console[e].apply}catch(o){}n[e]=r?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log})),e.exports=n}).call(this,n("yLpj"))},LBZQ:function(e,t,n){"use strict";var r=n("41W/").EventEmitter;function o(){var e=this;r.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),o.timeout)}n("P7XM")(o,r),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,e.exports=o},MaM3:function(e,t,n){"use strict";var r=n("P7XM"),o=n("dq/4"),i=n("4BPL"),a=n("vAT7");function s(e,t,n,r,s){var c=o.addPath(e,t),u=this;i.call(this,e,n),this.poll=new a(r,c,s),this.poll.on("message",(function(e){u.emit("message",e)})),this.poll.once("close",(function(e,t){u.poll=null,u.emit("close",e,t),u.close()}))}r(s,i),s.prototype.close=function(){i.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=s},"N1+o":function(e,t){e.exports="1.5.0"},O8AR:function(e,t,n){"use strict";(function(t){var r=n("41W/").EventEmitter,o=n("P7XM"),i=n("kwwM"),a=n("+ICs"),s=n("XLbk"),c=n("G/ey");function u(e,n){var o=this;r.call(this);var u=function(){var t=o.ifr=new s(c.transportName,n,e);t.once("message",(function(e){if(e){var t;try{t=i.parse(e)}catch(a){return o.emit("finish"),void o.close()}var n=t[0],r=t[1];o.emit("finish",n,r)}o.close()})),t.once("close",(function(){o.emit("finish"),o.close()}))};t.document.body?u():a.attachEvent("load",u)}o(u,r),u.enabled=function(){return s.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=u}).call(this,n("yLpj"))},P21X:function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},P7XM:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},RA0T:function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},SLVX:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},SQnR:function(e,t,n){"use strict";var r=n("P7XM"),o=n("WsSN"),i=n("aXJd"),a=n("aumc"),s=n("ZS6Q");function c(e){if(!s.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",i,a)}r(c,o),c.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||a.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},Ta15:function(e,t,n){"use strict";var r,o=n("kwwM"),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=o.stringify(e);return i.lastIndex=0,i.test(t)?(r||(r=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(i)),t.replace(i,(function(e){return r[e]}))):t}}},"V/Dq":function(e,t,n){"use strict";var r=n("P7XM"),o=n("P21X");function i(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(i,o),e.exports=i},VeNG:function(e,t,n){"use strict";(function(t){var r=n("Eyz+");e.exports=n("4aWg")(r),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,n("yLpj"))},WJkJ:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},WKiH:function(e,t,n){var r=n("HYAF"),o="["+n("WJkJ")+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},WsSN:function(e,t,n){"use strict";var r=n("P7XM"),o=n("dq/4"),i=n("MaM3");function a(e,t,n,r){i.call(this,e,t,function(e){return function(t,n,r){var i={};"string"==typeof n&&(i.headers={"Content-type":"text/plain"});var a=o.addPath(t,"/xhr_send"),s=new e("POST",a,n,i);return s.once("finish",(function(e){if(s=null,200!==e&&204!==e)return r(new Error("http status "+e));r()})),function(){s.close(),s=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(a,i),e.exports=a},XLbk:function(e,t,n){"use strict";var r=n("P7XM"),o=n("kwwM"),i=n("41W/").EventEmitter,a=n("N1+o"),s=n("dq/4"),c=n("2EN1"),u=n("+ICs"),l=n("wK5r");function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(o,(function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()})),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}r(d,i),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(e.data,!s.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=o.parse(e.data)}catch(r){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",o.stringify([a,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=o.parse(t.data)}catch(r){return void t.data}this.emit("close",n[0],n[1]),this.close()}},d.prototype.postMessage=function(e,t){this.iframeObj.post(o.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return c.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},XoJ6:function(e,t,n){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},ZGRn:function(e,t,n){"use strict";var r=n("+ICs"),o=n("dq/4"),i=n("P7XM"),a=n("41W/").EventEmitter,s=n("7dLu");function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");a.call(this);var i=this,u=o.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new s(this.url,[],n),this.ws.onmessage=function(e){e.data,i.emit("message",e.data)},this.unloadRef=r.unloadAdd((function(){i.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,i.emit("close",e.code,e.reason),i._cleanup()},this.ws.onerror=function(e){i.emit("close",1006,"WebSocket connection broken"),i._cleanup()}}i(c,a),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!s},c.transportName="websocket",c.roundTrips=2,e.exports=c},ZS6Q:function(e,t,n){"use strict";var r=n("P7XM"),o=n("FMj+");function i(e,t,n){o.call(this,e,t,n,{noCredentials:!0})}r(i,o),i.enabled=o.enabled,e.exports=i},aXJd:function(e,t,n){"use strict";var r=n("P7XM"),o=n("41W/").EventEmitter;function i(e,t){o.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(i,o),i.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&this.emit("message",o)}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=i},aumc:function(e,t,n){"use strict";var r=n("P7XM"),o=n("FMj+");function i(e,t,n,r){o.call(this,e,t,n,r)}r(i,o),i.enabled=o.enabled&&o.supportsCORS,e.exports=i},bCCX:function(e,t,n){"use strict";(function(e,r){var o,i=n("SLVX");o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n("yLpj"),n("3UD+")(e))},"dq/4":function(e,t,n){"use strict";var r=n("GBY4");e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},eCLP:function(e,t,n){"use strict";var r=n("dq/4"),o=n("+ICs"),i=n("kwwM"),a=n("+x1K"),s=n("G/ey"),c=n("2EN1"),u=n("jBAH");e.exports=function(e,t){var n,l={};t.forEach((function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)})),l[s.transportName]=s,e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1);o.attachEvent("message",(function(o){if(o.source===parent&&(void 0===n&&(n=o.origin),o.origin===n)){var s;try{s=i.parse(o.data)}catch(m){return void o.data}if(s.windowId===c.currentWindowId)switch(s.type){case"s":var d;try{d=i.parse(s.data)}catch(m){s.data;break}var p=d[0],f=d[1],h=d[2],v=d[3];if(p!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(h,u.href)||!r.isOriginEqual(v,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+h+", "+v+")");t=new a(new l[f](h,v));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),c.postMessage("s")}}},h4wu:function(e,t,n){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))})),r}}}},hNov:function(e,t,n){"use strict";var r=n("P7XM"),o=n("WsSN"),i=n("aXJd"),a=n("ERqb");function s(e){if(!a.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",i,a)}r(s,o),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(a.enabled&&e.sameScheme)},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},jBAH:function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,n("yLpj"))},kwwM:function(e,t,n){(function(e,r){var o;(function(){var i=n("PDX0"),a={function:!0,object:!0},s=a[typeof t]&&t&&!t.nodeType&&t,c=a[typeof window]&&window||this,u=s&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;function l(e,t){e||(e=c.Object()),t||(t=c.Object());var n=e.Number||c.Number,r=e.String||c.String,o=e.Object||c.Object,i=e.Date||c.Date,s=e.SyntaxError||c.SyntaxError,u=e.TypeError||c.TypeError,d=e.Math||c.Math,p=e.JSON||c.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var f=o.prototype,h=f.toString,v=f.hasOwnProperty;function m(e,t){try{e()}catch(n){t&&t()}}var y=new i(-0xc782b5b800cec);function _(e){if(null!=_[e])return _[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=_("json-stringify")&&_("date-serialization")&&_("json-parse");else if("date-serialization"==e){if(o=_("json-stringify")&&y){var a=t.stringify;m((function(){o='"-271821-04-20T00:00:00.000Z"'==a(new i(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new i(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new i(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new i(-1))}))}}else{var s,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u="function"==typeof(a=t.stringify);u&&((s=function(){return 1}).toJSON=s,m((function(){u="0"===a(0)&&"0"===a(new n)&&'""'==a(new r)&&void 0===a(h)&&void 0===a(void 0)&&void 0===a()&&"1"===a(s)&&"[1]"==a([s])&&"[null]"==a([void 0])&&"null"==a(null)&&"[null,null,null]"==a([void 0,h,null])&&a({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==c&&"1"===a(null,s)&&"[\n 1,\n 2\n]"==a([1,2],null,1)}),(function(){u=!1}))),o=u}if("json-parse"==e){var l,d=t.parse;"function"==typeof d&&m((function(){0!==d("0")||d(!1)||(s=d(c),(l=5==s.a.length&&1===s.a[0])&&(m((function(){l=!d('"\t"')})),l&&m((function(){l=1!==d("01")})),l&&m((function(){l=1!==d("1.")}))))}),(function(){l=!1})),o=l}}return _[e]=!!o}if(m((function(){y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()})),_["bug-string-char-index"]=_["date-serialization"]=_.json=_["json-stringify"]=_["json-parse"]=null,!_("json")){var g=_("bug-string-char-index"),b=function(e,t){var n,r,o,i=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)v.call(r,o)&&i++;return n=r=null,i?b=function(e,t){var n,r,o="[object Function]"==h.call(e);for(n in e)o&&"prototype"==n||!v.call(e,n)||(r="constructor"===n)||t(n);(r||v.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],b=function(e,t){var n,o,i="[object Function]"==h.call(e),s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||v;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];)s.call(e,n)&&t(n)}),b(e,t)};if(!_("json-stringify")&&!_("date-serialization")){var w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I=function(e,t){return("000000"+(t||0)).slice(-e)},E=function(e){var t,n,r,o,i,a,s,c,u;if(y)t=function(e){n=e.getUTCFullYear(),r=e.getUTCMonth(),o=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var l=d.floor,p=[0,31,59,90,120,151,181,212,243,273,304,334],f=function(e,t){return p[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){for(o=l(e/864e5),n=l(o/365.2425)+1970-1;f(n+1,0)<=o;n++);for(r=l((o-f(n,0))/30.42);f(n,r+1)<=o;r++);o=1+o-f(n,r),a=l((i=(e%864e5+864e5)%864e5)/36e5)%24,s=l(i/6e4)%60,c=l(i/1e3)%60,u=i%1e3}}return(E=function(e){return e>-1/0&&e<1/0?(t(e),e=(n<=0||n>=1e4?(n<0?"-":"+")+I(6,n<0?-n:n):I(4,n))+"-"+I(2,r+1)+"-"+I(2,o)+"T"+I(2,a)+":"+I(2,s)+":"+I(2,c)+"."+I(3,u)+"Z",n=r=o=a=s=c=u=null):e=null,e})(e)};if(_("json-stringify")&&!_("date-serialization")){var x=function(e){return E(this)},T=t.stringify;t.stringify=function(e,t,n){var r=i.prototype.toJSON;i.prototype.toJSON=x;var o=T(e,t,n);return i.prototype.toJSON=r,o}}else{var S=function(e){var t=e.charCodeAt(0),n=w[t];return n||"\\u00"+I(2,t.toString(16))},O=/[\x00-\x1f\x22\x5c]/g,j=function(e){return O.lastIndex=0,'"'+(O.test(e)?e.replace(O,S):e)+'"'};t.stringify=function(e,t,n){var r,o,s,c;if(a[typeof t]&&t)if("[object Function]"==(c=h.call(t)))o=t;else if("[object Array]"==c){s={};for(var l,d=0,p=t.length;d<p;)l=t[d++],"[object String]"!=(c=h.call(l))&&"[object Number]"!=c||(s[l]=1)}if(n)if("[object Number]"==(c=h.call(n))){if((n-=n%1)>0)for(n>10&&(n=10),r="";r.length<n;)r+=" "}else"[object String]"==c&&(r=n.length<=10?n:n.slice(0,10));return function e(t,n,r,o,a,s,c){var l,d,p,f,v,y,_,g,w;if(m((function(){l=n[t]})),"object"==typeof l&&l&&(l.getUTCFullYear&&"[object Date]"==h.call(l)&&l.toJSON===i.prototype.toJSON?l=E(l):"function"==typeof l.toJSON&&(l=l.toJSON(t))),r&&(l=r.call(n,t,l)),null==l)return void 0===l?l:"null";switch("object"==(d=typeof l)&&(p=h.call(l)),p||d){case"boolean":case"[object Boolean]":return""+l;case"number":case"[object Number]":return l>-1/0&&l<1/0?""+l:"null";case"string":case"[object String]":return j(""+l)}if("object"==typeof l){for(_=c.length;_--;)if(c[_]===l)throw u();if(c.push(l),f=[],g=s,s+=a,"[object Array]"==p){for(y=0,_=l.length;y<_;y++)v=e(y,l,r,o,a,s,c),f.push(void 0===v?"null":v);w=f.length?a?"[\n"+s+f.join(",\n"+s)+"\n"+g+"]":"["+f.join(",")+"]":"[]"}else b(o||l,(function(t){var n=e(t,l,r,o,a,s,c);void 0!==n&&f.push(j(t)+":"+(a?" ":"")+n)})),w=f.length?a?"{\n"+s+f.join(",\n"+s)+"\n"+g+"}":"{"+f.join(",")+"}":"{}";return c.pop(),w}}("",((l={})[""]=e,l),o,s,r,"",[])}}}if(!_("json-parse")){var k,C,N=r.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw k=C=null,s()},M=function(){for(var e,t,n,r,o,i=C,a=i.length;k<a;)switch(o=i.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=g?i.charAt(k):i[k],k++,e;case 34:for(e="@",k++;k<a;)if((o=i.charCodeAt(k))<32)A();else if(92==o)switch(o=i.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],k++;break;case 117:for(t=++k,n=k+4;k<n;k++)(o=i.charCodeAt(k))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||A();e+=N("0x"+i.slice(t,k));break;default:A()}else{if(34==o)break;for(o=i.charCodeAt(k),t=k;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++k);e+=i.slice(t,k)}if(34==i.charCodeAt(k))return k++,e;A();default:if(t=k,45==o&&(r=!0,o=i.charCodeAt(++k)),o>=48&&o<=57){for(48==o&&((o=i.charCodeAt(k+1))>=48&&o<=57)&&A(),r=!1;k<a&&((o=i.charCodeAt(k))>=48&&o<=57);k++);if(46==i.charCodeAt(k)){for(n=++k;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==k&&A(),k=n}if(101==(o=i.charCodeAt(k))||69==o){for(43!=(o=i.charCodeAt(++k))&&45!=o||k++,n=k;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==k&&A(),k=n}return+i.slice(t,k)}r&&A();var s=i.slice(k,k+4);if("true"==s)return k+=4,!0;if("fals"==s&&101==i.charCodeAt(k+4))return k+=5,!1;if("null"==s)return k+=4,null;A()}return"$"},q=function(e,t,n){var r=L(e,t,n);void 0===r?delete e[t]:e[t]=r},L=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if("[object Array]"==h.call(o))for(r=o.length;r--;)q(h,b,o);else b(o,(function(e){q(o,e,n)}));return n.call(e,t,o)};t.parse=function(e,t){var n,r;return k=0,C=""+e,n=function e(t){var n,r;if("$"==t&&A(),"string"==typeof t){if("@"==(g?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=M());)r?","==t?"]"==(t=M())&&A():A():r=!0,","==t&&A(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=M());)r?","==t?"}"==(t=M())&&A():A():r=!0,","!=t&&"string"==typeof t&&"@"==(g?t.charAt(0):t[0])&&":"==M()||A(),n[t.slice(1)]=e(M());return n}A()}return t}(M()),"$"!=M()&&A(),k=C=null,t&&"[object Function]"==h.call(t)?L(((r={})[""]=n,r),"",t):n}}}return t.runInContext=l,t}if(!u||u.global!==u&&u.window!==u&&u.self!==u||(c=u),s&&!i)l(c,s);else{var d=c.JSON,p=c.JSON3,f=!1,h=l(c,c.JSON3={noConflict:function(){return f||(f=!0,c.JSON=d,c.JSON3=p,d=p=null),h}});c.JSON={parse:h.parse,stringify:h.stringify}}i&&(void 0===(o=function(){return h}.call(t,n,t,e))||(e.exports=o))}).call(this)}).call(this,n("YuTi")(e),n("yLpj"))},l0Oj:function(e,t,n){"use strict";(function(t){var r=n("P7XM"),o=n("2EN1"),i=n("dq/4"),a=n("41W/").EventEmitter,s=n("wK5r");function c(e){a.call(this);var n=this;o.polluteGlobalNamespace(),this.id="a"+s.string(6),e=i.addQuery(e,"c="+decodeURIComponent(o.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?o.createHtmlfile:o.createIframe;t[o.WPrefix][this.id]={start:function(){n.iframeObj.loaded()},message:function(e){n.emit("message",e)},stop:function(){n._cleanup(),n._close("network")}},this.iframeObj=r(e,(function(){n._cleanup(),n._close("permanent")}))}r(c,a),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[o.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in t)try{c.htmlfileEnabled=!!new t[u]("htmlfile")}catch(l){}c.enabled=c.htmlfileEnabled||o.iframeEnabled,e.exports=c}).call(this,n("yLpj"))},nFlj:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var n,o,a=[];for(o in"string"!=typeof t&&(t="?"),e)if(r.call(e,o)){if((n=e[o])||null!=n&&!isNaN(n)||(n=""),o=i(o),n=i(n),null===o||null===n)continue;a.push(o+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=o(t[1]),a=o(t[2]);null===i||null===a||i in r||(r[i]=a)}return r}},nV5M:function(e,t,n){"use strict";(function(t){var r=n("2EN1"),o=n("wK5r"),i=n("I3Mb"),a=n("dq/4"),s=n("P7XM"),c=n("41W/").EventEmitter;function u(e){var n=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+o.string(6);var i=a.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));t[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout((function(){n._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}s(u,c),u.prototype.abort=function(){if(t[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[r.WPrefix][this.id]},u.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){var n,r=this,a=this.script=t.document.createElement("script");if(a.id="a"+o.string(8),a.src=e,a.type="text/javascript",a.charset="UTF-8",a.onerror=this._scriptError.bind(this),a.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(a.readyState,/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){r.loadedOkay=!0;try{a.onclick()}catch(e){}}a&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===a.async&&t.document.attachEvent)if(i.isOpera())(n=this.script2=t.document.createElement("script")).text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=n.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(c){}a.async=!0}void 0!==a.async&&(a.async=!0);var s=t.document.getElementsByTagName("head")[0];s.insertBefore(a,s.firstChild),n&&s.insertBefore(n,s.firstChild)},e.exports=u}).call(this,n("yLpj"))},nsiM:function(e,t,n){"use strict";var r=n("P7XM"),o=n("l0Oj"),i=n("ZS6Q"),a=n("WsSN");function s(e){if(!o.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/htmlfile",o,i)}r(s,a),s.enabled=function(e){return o.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},qZAh:function(e,t,n){"use strict";var r=n("P7XM"),o=n("P21X");function i(e){o.call(this),this.initEvent("message",!1,!1),this.data=e}r(i,o),e.exports=i},tziy:function(e,t,n){"use strict";var r=n("P7XM"),o=n("WsSN"),i=n("0yEH"),a=n("aumc"),s=n("3Iy2");function c(e){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/eventsource",i,a)}r(c,o),c.enabled=function(){return!!s},c.transportName="eventsource",c.roundTrips=2,e.exports=c},uAge:function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)},e.exports=r},vAT7:function(e,t,n){"use strict";var r=n("P7XM"),o=n("41W/").EventEmitter;function i(e,t,n){o.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(i,o),i.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))}))},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=i},wK5r:function(e,t,n){"use strict";var r=n("zdcf");e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,n=r.randomBytes(e),o=[],i=0;i<e;i++)o.push("abcdefghijklmnopqrstuvwxyz012345".substr(n[i]%t,1));return o.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},yNLB:function(e,t,n){var r=n("0Dky"),o=n("WJkJ");e.exports=function(e){return r((function(){return!!o[e]()||""!=""[e]()||o[e].name!==e}))}},zdcf:function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,n("yLpj"))}}]);
//# sourceMappingURL=84-7a4d9f89bc4f5f657200.js.map