## Translation Workflow

The purpose of this document is to explain the general workflow and commands required for our translation process on Deriv.com

---

### General workflow will be as such:
⚠️ Note: If you're not managing the translations on Crowdin, the workflow usually stops at step #3.

<br />

1. PR will be based on crowdin branch

    - if you dont have crowdin branch

    ```sh
    git fetch upstream crowdin:crowdin
    git checkout crowdin
    git checkout -b [_your_branch_name]
    ```

    -   if you have crowdin branch

    ```sh
    git checkout crowdin
    git pull upstream crowdin
    git checkout -b [_your_branch_name]
    ```

2. Make your changes and submit for review followed by checking by QA. Only the `English version` is checked at this staged by QA as the new strings have not been extracted for translation purposes.

3. Once it passes QA, it will be merged into the Crowdin branch.

<br />

### Extracting & Managing Translations:

4. Extract translations from Crowdin branch
    -   Make sure you have the latest crowdin changes, resolve conflicts if any

    ```sh
    git pull upstream crowdin
    ```

   -   Extract translation text to update `messages.json`

    ```sh
    npm run translate:extract
    ```

-   Commit your changes

5. Make pull request

   -   Push your changes to your origin, add `-u` flag for the first time push

       ```sh
       git push -u origin [_your_branch_name]
       ```

   -   Click on the autogenerated link from terminal to open the PR

   -   Make sure to change the PR base to `crowdin` branch

6. Uploading source text to crowdin platform (To be translated by translators)

    ```sh
    npm run translate:upload
    ```

7. Download/get latest crowdin translations (Once strings are translated on Crowdin Platform). 
    ```sh
    npm run translate:download
    ```
    This triggers a build and redeploys an updated version of the crowdin test link with the new translated texts.

8. The task now goes through a translation regression check to test for all other languages.

9. Once ready, it can be merged into master awaiting to be rebased.